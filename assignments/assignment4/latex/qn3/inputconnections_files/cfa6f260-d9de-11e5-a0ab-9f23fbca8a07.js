(function(a){a.fn.extend({autocomplete:function(b,c){var d=typeof b=="string";c=a.extend({},a.Autocompleter.defaults,{url:d?b:null,data:d?null:b,delay:d?a.Autocompleter.defaults.delay:10,max:c&&!c.scroll?10:150,noRecord:"No Records."},c);c.highlight=c.highlight||function(e){return e};c.formatMatch=c.formatMatch||c.formatItem;return this.each(function(){new a.Autocompleter(this,c)})},result:function(b){return this.bind("result",b)},search:function(b){return this.trigger("search",[b])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(b){return this.trigger("setOptions",[b])},unautocomplete:function(){return this.trigger("unautocomplete")}});a.Autocompleter=function(m,g){var c={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};var i=null;if(g.failure!=null&&typeof g.failure=="function"){i=g.failure}var b=a(m).attr("autocomplete","off").addClass(g.inputClass);var k;var r="";var n=a.Autocompleter.Cache(g);var e=0;var v;var y={mouseDownOnSelect:false};var s=a.Autocompleter.Select(g,m,d,y);var x;navigator.userAgent.indexOf("Opera")!=-1&&a(m.form).bind("submit.autocomplete",function(){if(x){x=false;return false}});b.bind((navigator.userAgent.indexOf("Opera")!=-1&&!"KeyboardEvent" in window?"keypress":"keydown")+".autocomplete",function(z){e=1;v=z.keyCode;switch(z.keyCode){case c.UP:if(s.visible()){z.preventDefault();s.prev()}else{u(0,true)}break;case c.DOWN:if(s.visible()){z.preventDefault();s.next()}else{u(0,true)}break;case c.PAGEUP:if(s.visible()){z.preventDefault();s.pageUp()}else{u(0,true)}break;case c.PAGEDOWN:if(s.visible()){z.preventDefault();s.pageDown()}else{u(0,true)}break;case g.multiple&&a.trim(g.multipleSeparator)==","&&c.COMMA:case c.TAB:case c.RETURN:if(d()){z.preventDefault();x=true;return false}break;case c.ESC:s.hide();break;default:clearTimeout(k);k=setTimeout(u,g.delay);break}}).focus(function(){e++}).blur(function(){e=0;if(!y.mouseDownOnSelect){t()}}).click(function(){if(g.clickFire){if(!s.visible()){u(0,true)}}else{if(e++>1&&!s.visible()){u(0,true)}}}).bind("search",function(){var z=(arguments.length>1)?arguments[1]:null;function A(E,D){var B;if(D&&D.length){for(var C=0;C<D.length;C++){if(D[C].result.toLowerCase()==E.toLowerCase()){B=D[C];break}}}if(typeof z=="function"){z(B)}else{b.trigger("result",B&&[B.data,B.value])}}a.each(h(b.val()),function(B,C){f(C,A,A)})}).bind("flushCache",function(){n.flush()}).bind("setOptions",function(){a.extend(true,g,arguments[1]);if("data" in arguments[1]){n.populate()}}).bind("unautocomplete",function(){s.unbind();b.unbind();a(m.form).unbind(".autocomplete")});function d(){var C=s.selected();if(!C){return false}var z=C.result;r=z;if(g.multiple){var F=h(b.val());if(F.length>1){var B=g.multipleSeparator.length;var E=a(m).selection().start;var D,A=0;a.each(F,function(G,H){A+=H.length;if(E<=A){D=G;return false}A+=B});F[D]=z;z=F.join(g.multipleSeparator)}z+=g.multipleSeparator}b.val(z);w();b.trigger("result",[C.data,C.value]);return true}function u(B,A){if(v==c.DEL){s.hide();return}var z=b.val();if(!A&&z==r){return}r=z;z=j(z);if(z.length>=g.minChars){b.addClass(g.loadingClass);if(!g.matchCase){z=z.toLowerCase()}f(z,l,w)}else{o();s.hide()}}function h(z){if(!z){return[""]}if(!g.multiple){return[a.trim(z)]}return a.map(z.split(g.multipleSeparator),function(A){return a.trim(z).length?a.trim(A):null})}function j(z){if(!g.multiple){return z}var B=h(z);if(B.length==1){return B[0]}var A=a(m).selection().start;if(A==z.length){B=h(z)}else{B=h(z.replace(z.substring(A),""))}return B[B.length-1]}function q(z,A){if(g.autoFill&&(j(b.val()).toLowerCase()==z.toLowerCase())&&v!=c.BACKSPACE){b.val(b.val()+A.substring(j(r).length));a(m).selection(r.length,r.length+A.length)}}function t(){clearTimeout(k);k=setTimeout(w,200)}function w(){var z=s.visible();s.hide();clearTimeout(k);o();if(g.mustMatch){b.search(function(A){if(!A){if(g.multiple){var B=h(b.val()).slice(0,-1);b.val(B.join(g.multipleSeparator)+(B.length?g.multipleSeparator:""))}else{b.val("");b.trigger("result",null)}}})}}function l(A,z){if(z&&z.length&&e){o();s.display(z,A);q(A,z[0].value);s.show()}else{w()}}function f(A,C,z){if(!g.matchCase){A=A.toLowerCase()}var B=n.load(A);if(B){if(B.length){C(A,B)}else{s.hide()}}else{if((typeof g.url=="string")&&(g.url.length>0)){var D={timestamp:+new Date()};a.each(g.extraParams,function(E,F){D[E]=typeof F=="function"?F():F});a.ajax({mode:"abort",port:"autocomplete"+m.name,dataType:g.dataType,url:g.url,data:a.extend({q:j(A),limit:g.max},D),success:function(F){var E=g.parse&&g.parse(F)||p(F);n.add(A,E);C(A,E)}})}else{s.emptyList();if(i!=null){i()}else{z(A)}}}}function p(C){var z=[];var B=C.split("\n");for(var A=0;A<B.length;A++){var D=a.trim(B[A]);if(D){D=D.split("|");z[z.length]={data:D,value:D[0],result:g.formatResult&&g.formatResult(D,D[0])||D[0]}}}return z}function o(){b.removeClass(g.loadingClass)}};a.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:100,max:1000,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(b){return b[0]},formatMatch:null,autoFill:false,width:0,multiple:false,multipleSeparator:" ",inputFocus:true,clickFire:false,highlight:function(c,b){return c.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+b.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:true,scrollHeight:180,scrollJumpPosition:true};a.Autocompleter.Cache=function(c){var f={};var d=0;function h(l,k){if(!c.matchCase){l=l.toLowerCase()}var j=l.indexOf(k);if(c.matchContains=="word"){j=l.toLowerCase().search("\\b"+k.toLowerCase())}if(j==-1){return false}return j==0||c.matchContains}function g(j,i){if(d>c.cacheLength){b()}if(!f[j]){d++}f[j]=i}function e(){if(!c.data){return false}var k={},j=0;if(!c.url){c.cacheLength=1}k[""]=[];for(var m=0,l=c.data.length;m<l;m++){var p=c.data[m];p=(typeof p=="string")?[p]:p;var o=c.formatMatch(p,m+1,c.data.length);if(typeof(o)==="undefined"||o===false){continue}var n=o.charAt(0).toLowerCase();if(!k[n]){k[n]=[]}var q={value:o,data:p,result:c.formatResult&&c.formatResult(p)||o};k[n].push(q);if(j++<c.max){k[""].push(q)}}a.each(k,function(r,s){c.cacheLength++;g(r,s)})}setTimeout(e,25);function b(){f={};d=0}return{flush:b,add:g,populate:e,load:function(n){if(!c.cacheLength||!d){return null}if(!c.url&&c.matchContains){var m=[];for(var j in f){if(j.length>0){var o=f[j];a.each(o,function(p,k){if(h(k.value,n)){m.push(k)}})}}return m}else{if(f[n]){return f[n]}else{if(c.matchSubset){for(var l=n.length-1;l>=c.minChars;l--){var o=f[n.substr(0,l)];if(o){var m=[];a.each(o,function(p,k){if(h(k.value,n)){m[m.length]=k}});return m}}}}}return null}}};a.Autocompleter.Select=function(e,j,l,p){var i={ACTIVE:"ac_over"};var k,f=-1,r,m="",s=true,c,o;function n(){if(!s){return}c=a("<div/>").hide().addClass(e.resultsClass).css("position","absolute").appendTo(document.body).hover(function(t){if(a(this).is(":visible")){try{j.focus()}catch(u){}}p.mouseDownOnSelect=false});o=a("<ul/>").appendTo(c).mouseover(function(t){if(q(t).nodeName&&q(t).nodeName.toUpperCase()=="LI"){f=a("li",o).removeClass(i.ACTIVE).index(q(t));a(q(t)).addClass(i.ACTIVE)}}).click(function(t){a(q(t)).addClass(i.ACTIVE);l();if(e.inputFocus){try{j.focus()}catch(u){}}return false}).mousedown(function(){p.mouseDownOnSelect=true}).mouseup(function(){p.mouseDownOnSelect=false});if(e.width>0){c.css("width",e.width)}s=false}function q(u){var t=u.target;while(t&&t.tagName!="LI"){t=t.parentNode}if(!t){return[]}return t}function h(t){k.slice(f,f+1).removeClass(i.ACTIVE);g(t);var v=k.slice(f,f+1).addClass(i.ACTIVE);if(e.scroll){var u=0;k.slice(0,f).each(function(){u+=this.offsetHeight});if((u+v[0].offsetHeight-o.scrollTop())>o[0].clientHeight){o.scrollTop(u+v[0].offsetHeight-o.innerHeight())}else{if(u<o.scrollTop()){o.scrollTop(u)}}}}function g(t){if(e.scrollJumpPosition||(!e.scrollJumpPosition&&!((t<0&&f==0)||(t>0&&f==k.size()-1)))){f+=t;if(f<0){f=k.size()-1}else{if(f>=k.size()){f=0}}}}function b(t){return e.max&&e.max<t?e.max:t}function d(){o.empty();var u=b(r.length);for(var v=0;v<u;v++){if(!r[v]){continue}var w=e.formatItem(r[v].data,v+1,u,r[v].value,m);if(w===false){continue}var t=a("<li/>").html(e.highlight(w,m)).addClass(v%2==0?"ac_even":"ac_odd").appendTo(o)[0];a.data(t,"ac_data",r[v])}k=o.find("li");if(e.selectFirst){k.slice(0,1).addClass(i.ACTIVE);f=0}if(a.fn.bgiframe){o.bgiframe()}}return{display:function(u,t){n();r=u;m=t;d()},next:function(){h(1)},prev:function(){h(-1)},pageUp:function(){if(f!=0&&f-8<0){h(-f)}else{h(-8)}},pageDown:function(){if(f!=k.size()-1&&f+8>k.size()){h(k.size()-1-f)}else{h(8)}},hide:function(){c&&c.hide();k&&k.removeClass(i.ACTIVE);f=-1},visible:function(){return c&&c.is(":visible")},current:function(){return this.visible()&&(k.filter("."+i.ACTIVE)[0]||e.selectFirst&&k[0])},show:function(){var v=a(j).offset();c.css({width:typeof e.width=="string"||e.width>0?e.width:a(j).width(),top:v.top+j.offsetHeight,left:v.left}).show();if(e.scroll){o.scrollTop(0);o.css({maxHeight:e.scrollHeight,overflow:"auto"});if(navigator.userAgent.indexOf("MSIE")!=-1&&typeof document.body.style.maxHeight==="undefined"){var t=0;k.each(function(){t+=this.offsetHeight});var u=t>e.scrollHeight;o.css("height",u?e.scrollHeight:t);if(!u){k.width(o.width()-parseInt(k.css("padding-left"))-parseInt(k.css("padding-right")))}}}},selected:function(){var t=k&&k.filter("."+i.ACTIVE).removeClass(i.ACTIVE);return t&&t.length&&a.data(t[0],"ac_data")},emptyList:function(){o&&o.empty()},unbind:function(){c&&c.remove()}}};a.fn.selection=function(i,b){if(i!==undefined){return this.each(function(){if(this.createTextRange){var j=this.createTextRange();if(b===undefined||i==b){j.move("character",i);j.select()}else{j.collapse(true);j.moveStart("character",i);j.moveEnd("character",b);j.select()}}else{if(this.setSelectionRange){this.setSelectionRange(i,b)}else{if(this.selectionStart){this.selectionStart=i;this.selectionEnd=b}}}})}var g=this[0];if(g.createTextRange){var c=document.selection.createRange(),h=g.value,f="<->",d=c.text.length;c.text=f;var e=g.value.indexOf(f);g.value=h;this.selection(e,e+d);return{start:e,end:e+d}}else{if(g.selectionStart!==undefined){return{start:g.selectionStart,end:g.selectionEnd}}}}})(jQuery);(function(){var b={};this.tmpl=function a(e,d){e=e.trim();var c=!/\W/.test(e)?b[e]=b[e]||a(document.getElementById(e).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"\t").trim().split("'").join("\\'").split("\t").join("'").replace(/<%=(.+?)%>/g,"',$1,'").split("<%").join("');").split("%>").join("p.push('")+"');}return p.join('');");return d?c(d):c}})();(function(){var b={};this.tmplEscaped=function a(e,d){e=e.trim();var c=!/\W/.test(e)?b[e]=b[e]||a(document.getElementById(e).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"\t").trim().split("'").join("\\'").split("\t").join("'").replace(/<%=\|safe(.+?)%>/g,"',$1,'").replace(/<%=(.+?)%>/g,"',Connected.Utils.encodeHTML($1),'").split("<%").join("');").split("%>").join("p.push('")+"');}return p.join('');");return d?c(d):c}})();$.throttle=function(c,d){var b,f,g,h,e,i;var a=_.debounce(function(){e=h=false},d);return function(){b=this;f=arguments;var j=function(){g=null;if(e){i=c.apply(b,f)}a()};if(!g){g=setTimeout(j,d)}if(h){e=true}else{h=true;i=c.apply(b,f)}a();return i}};$.debounce=function(c,e,b){var d,a;return function(){var i=this,h=arguments;var g=function(){d=null;if(!b){a=c.apply(i,h)}};var f=b&&!d;clearTimeout(d);d=setTimeout(g,e);if(f){a=c.apply(i,h)}return a}};(function(b){var a={};a.Event=function(c){return{_hook:function(){if(!this._$hook){this._$hook=$({})}return this._$hook},on:function(){var d=this._hook();d.on.apply(d,arguments)},off:function(){var d=this._hook();d.off.apply(d,arguments)},trigger:function(){var d=this._hook();d.trigger.apply(d,arguments)}}};b.Mixins=a})(window);(function(d,e){var a=".alert-control";var c=['<div class="alert <%= type %>" role="alert">'," <%= message %>",' <a href="#" class="js-dismiss dismiss" title="dismiss this message" role="button">Dismiss this message</a>',"</div>"].join("");var f={type:"notice",message:"Alert!"};var b=Fiber.extend(function(){return{template:function(g){return tmpl(c,g)},init:function(g){this.options=e.extend({},f,g||{});this.$el=this.options.el?e(this.options.el):e(this.template(this.options));this.$el.on("click."+a,e.proxy(this.onClose,this))},close:function(h){if(h&&h.preventDefault){h.preventDefault()}var g=this.$el||e(this).closest(".alert");g.trigger("alert-closed").remove().off(a)},appendTo:function(g){return this.$el.appendTo(g)},prependTo:function(g){return this.$el.prependTo(g)}}});Fiber.mixin(b,Mixins.Event);(function(){var g=0;var h={};e.fn.alert=function(){var j=Array.prototype.slice.call(arguments);var k=(typeof j[0]==="string")?j[0]:null;var i=(typeof j[0]==="object"&&j.length===1)?j[0]:{};return this.each(function(){var m=e(this);if(!k){g+=1;m.data("alert-id","t"+g);h["t"+g]=(new b(e.extend({el:this},i)))}var l=h[m.data("alertId")];if(typeof k==="string"&&l){l[k].apply(l,j.slice(1));if(k==="close"){delete h[m.data("alertId")]}}})}}());d.UIControls=e.extend({},d.UIControls,{Alert:b});e(document).on("click",".js-dismiss",b.prototype.close)})(window,window.jQuery);(function(a,b){var c=Fiber.extend(function(){var d=40;var e=66;return{$el:null,$content:null,template:'<div class="contacts-loader"><span></span></div>',frame:0,init:function(){this.$el=b(this.template);this.$content=this.$el.find("span");return this},show:function(){this.$el.show();this._animate();return this},hide:function(){this.$el.hide();return this},_animate:function(){if(!this.$el.is(":visible")){this.frame=0;return}this.$content.css("top",(this.frame*-d)+"px");this.frame=(this.frame+1)%12;setTimeout(b.proxy(this._animate,this),e);return this},appendTo:function(f){this.$el.appendTo(f);return this},prependTo:function(f){this.$el.prependTo(f);return this}}});a.UIControls=b.extend({},a.UIControls,{Loader:c})})(window,window.jQuery);(function(d,c){var b=Fiber.extend(function(){var g;var f="contactsTip";var e={debounce:300,placement:"bottom",offsetTop:0,offsetLeft:0,anchor:null,zIndex:null,type:"hover"};return{_isInsideTip:false,_isShowing:false,init:function(i,h){this.options=d.extend({},e,h);this.$anchor=this.options.anchor;this.$tip=i;this.$tip.appendTo(d(document.body));this.$arrow=i.find(".tip");this.bindEvents();this._isShowing=false},bindEvents:function(){switch(this.options.type){case"hover":this.$anchor.on("mouseleave."+f,d.proxy(this.onAnchorMouseLeave,this));this.$tip.on("mouseenter."+f,d.proxy(this.onMouseEnter,this));this.$tip.on("mouseleave."+f,d.proxy(this.onMouseLeave,this));break;case"click":d(document.body).on("click."+f,d.proxy(this.onDocumentClick,this));break}},show:function(){if(g&&g!==this){g.hide()}g=this;var h=this.calculatePosition();this.$tip.css(h);this.$tip.show();this._isShowing=true;if(this.options.zIndex&&!isNaN(parseInt(this.options.zIndex,10))){this.$tip.css("zIndex",this.options.zIndex)}},hide:function(){if(this.$tip){this.$tip.hide();this._isShowing=false}},toggle:function(){if(this._isShowing){this.hide()}else{this.show()}},isInsideTip:function(){return this._isInsideTip},isShowing:function(){return this._isShowing},onDocumentClick:function(){this.hide()},onMouseEnter:function(){this._isInsideTip=true},onMouseLeave:function(){this._isInsideTip=false;this.onAnchorMouseLeave()},onAnchorMouseLeave:function(){setTimeout(d.proxy(function(){if(!this._isInsideTip){this.hide()}},this),this.debounce)},calculatePosition:function(){var o=this.$anchor.offset(),i=this.$anchor.outerWidth(),h=this.$tip.outerWidth(),n=this.$tip.outerHeight(),j=this.$arrow.outerHeight();var m,k,l;switch(this.options.placement){case"bottom":if(o.left+h>d(document).width()-h){m=o.left+i-h+this.options.offsetLeft;l=o.top+i+this.options.offsetTop;k=h-i/2}else{l=o.top+i+this.options.offsetTop;m=o.left+this.options.offsetLeft;k=i/2}this.$arrow.css({left:k});break;case"top":m=o.left+i-i/2-h/2;l=o.top-this.options.offsetTop-n-j;break;default:l=o.top+i+this.options.offsetTop;m=o.left+this.options.offsetLeft}return{left:m,top:l}},destroy:function(){g=undefined;this.hide();this.$anchor.off(f);this.$tip.off().remove();this.options=this.$anchor=this.$tip=this.$arrow=undefined}}});var a=Fiber.extend(function(){var e="contactsToolTip";return{tip:null,_tipMoveDelay:500,_tipMouseLeaveProcessing:false,$content:null,template:['<div class="tooltip" role="tooltip" tabindex="-1" class="hidden">','<div class="callout-content"></div>','<i class="callout-arrow tip"></i>',"</div>"].join(""),$template:null,init:function(f){this.options=f;this.$el=d(this.options.el);this.$template=d(this.template);this.$content=this.$template.find(".callout-content");if(this.$el.attr("title")){this.$el.data("tooltip-content",this.$el.attr("title")).removeAttr("title")}this.bindEvents()},bindEvents:function(){this.$el.on("mouseenter."+e,d.proxy(this.onTriggerMouseEnter,this));this.$el.on("mouseleave."+e,d.proxy(this.onTriggerMouseLeave,this));this.$el.on("click."+e,d.proxy(this.onTriggerMouseClick,this))},getContent:function(){return this.$el.data("tooltipContent")},onTriggerMouseEnter:function(f){this.$content.text(this.getContent());this.tip=new UIControls.Tip(this.$template,{anchor:this.$el,placement:"top",zIndex:this.options.zIndex});this.tip.show()},onTriggerMouseLeave:function(){if(this._tipMouseLeaveProcessing){return}this._tipMouseLeaveProcessing=true;setTimeout(d.proxy(function(){if(this.tip&&!this.tip.isInsideTip()){this.removeTip()}},this),this._tipMoveDelay)},onTriggerMouseClick:function(){this.removeTip()},removeTip:function(){if(!this.tip){return}this.tip.destroy();this.tip=undefined;this._tipMouseLeaveProcessing=false},destroy:function(){this.tip=this.$content=this.$template=undefined;this.$el.off(e)}}});(function(){var e=0;var f={};d.fn.tooltip=function(){var h=Array.prototype.slice.call(arguments);var i=(typeof h[0]==="string")?h[0]:null;var g=(typeof h[0]==="object"&&h.length===1)?h[0]:{};return this.each(function(){var k=d(this);if(!i){e+=1;k.data("tooltip-id","t"+e);f["t"+e]=(new a(d.extend({el:this},g)))}var j=f[k.data("tooltipId")];if(typeof i==="string"&&j){j[i].apply(j,h.slice(1));if(i==="destroy"){delete f[k.data("tooltipId")]}}})}}());c.UIControls=d.extend(c.UIControls,{Tip:b,ToolTip:a})})(jQuery,window);(function(a,b){a.Contacts=b.extend(true,{Constants:{},Utils:{},UI:{},UIControls:{},App:{},API:{}},a.Contacts||{})})(window,window.jQuery);(function(e,c){e.Connected=e.Connected||{};var j=e.encodeURIComponent;var h=j("!'()*")!=="!'()*"?j:function h(){return j.apply(this,arguments).replace(/[!'()]/g,e.escape).replace(/\*/g,"%2A")};var g=(function(p){var q,m;var l={"\t":"\t","\r":"\r","\n":"\n","\u00a0":"&nbsp;","<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","\u007f":"&#xfffd;","\u2028":"&#x2028;","\u2029":"&#x2029;"};for(m=0;m<32;m++){q=String.fromCharCode(m);if(l[q]===p){l[q]="&#xfffd;"}}var n=/[\u0000-\u0008\u000b\u000c\u000e-\u001f\u00a0<>'"`\\\[\]+\-=.:(){};,\/&\u007f\u2028\u2029]/g;for(m=32;m<128;m++){q=String.fromCharCode(m);if(l[q]===p&&q.match(n)){l[q]="&#"+m+";"}}return function o(t){if(t===null||t===p){return""}var r=typeof(t);if(r==="number"||r==="boolean"){return t}else{if(r==="object"){return null}}return(t+"").replace(n,function(s){return l[s]})}}());var k={allowedTags:["A","AREA","AUDIO","B","BUTTON","BIG","BLOCKQUOTE","BR","CODE","DIV","FONT","FORM","H1","H2","H3","H4","H5","H6","HR","I","INPUT","IMG","LABEL","LI","MAP","MARQUEE","NOBR","OL","OPTGROUP","OPTION","P","PRE","Q","S","SELECT","SMALL","SOURCE","SPAN","STRIKE","STRONG","SUB","SUP","TABLE","TBODY","TD","TEXTAREA","TFOOT","TH","THEAD","TR","U","UL","VIDEO","WBR"],aliasAttributes:["rel","style","id","name","target","for","flashvars","classid","data","action","formaction","quality","scale","wmode","salign","background","allowfullscreen","allowscriptaccess","allownetworking","codebase"],allowedAttributes:["hreflang","checked","frameborder","border","scrolling","seamless","class","href","src","alt","title","type","method","height","width","value","cols","colspan","color","controls","coords","dir","disabled","enctype","hidden","label","loop","maxlength","multiple","pattern","preload","readonly","required","reversed","rows","rowspan","sandbox","spellcheck","usemap","data-\\w+","alias-\\w+","alias","typography"],urlAttributes:["src","href","action","formaction","poster"]};var f={allowedTags:k.allowedTags,aliasAttributes:null,allowedAttributes:["for","rel","target","action","id","name"].concat(k.allowedAttributes),urlAttributes:k.urlAttributes};var d=function(m){var l="[#/.?0-9]|&#x23;|&#35;|&#x2f;|&#47;|&#x2e;|&#46;|&#x3f;|&#63;|(?:mailto|http|ftp)|about:blank|data:image/(?:gif|jpg|jpeg|png);base64,|feed:https?://";return{allowedTagsRE:m.allowedTags===null?null:new RegExp("<(?=/?(?:"+m.allowedTags.join("|")+")(?:/?>|[ \\r\\n\\t][^<]*?>))","ig"),aliasAttributesRE:m.aliasAttributes===null?null:new RegExp("([ \\n\\t])("+m.aliasAttributes.join("|")+")(?=[ \\r\\n\\t]*=[ \\r\\n\\t]*['\"][^<]+?>)","ig"),allowedAttributesRE:m.allowedAttributes===null?null:new RegExp("([ \\n\\t](?:"+m.allowedAttributes.join("|")+")[ \\r\\n\\t]*)=(?=[ \\r\\n\\t]*['\"][^<]+?>)","ig"),urlAttributesRE:m.urlAttributes===null?null:new RegExp("([ \\n\\t](?:"+m.urlAttributes.join("|")+")[ \\r\\n\\t]*=[ \\r\\n\\t]*['\"][ \\r\\n\\t]*)(?![ \\r\\n\\t]*(:?"+l+"))","ig")}};var i=d(k);var b=function(l,m){l=l.replace(/\u0000/g,"&#xfffd;");l=l.replace(m.allowedTagsRE,"\u0000").replace(/<(\/?)(?=[a-z0-9]+[ \t\r\n>])/ig,"\u0000$1alias-").replace(/</g,"&lt;").replace(/\u0000/g,"<");if(m.aliasAttributesRE!==null){l=l.replace(m.aliasAttributesRE,"$1alias-$2")}l=l.replace(m.allowedAttributesRE,"$1\u0000").replace(/[=]/g,"&#61;").replace(/\u0000/g,"=");l=l.replace(m.urlAttributesRE,"$1./");return l};var a=(function(){var m,l=["January","February","March","April","May","June","July","August","September","October","November","December"],o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n={d:function(){return(m.getDate()<10?"0":"")+m.getDate()},D:function(){return o[m.getDay()].substring(0,3)},j:function(){return m.getDate()},l:function(){return o[m.getDay()]},N:function(){return m.getDay()+1},S:function(){return(m.getDate()%10===1&&m.getDate()!==11?"st":(m.getDate()%10===2&&m.getDate()!==12?"nd":(m.getDate()%10===3&&m.getDate()!==13?"rd":"th")))},w:function(){return m.getDay()},F:function(){return l[m.getMonth()]},m:function(){return(m.getMonth()<9?"0":"")+(m.getMonth()+1)},M:function(){return l[m.getMonth()].substring(0,3)},n:function(){return m.getMonth()+1},Y:function(){return m.getFullYear()},y:function(){return(""+m.getFullYear()).substr(2)},a:function(){return m.getHours()<12?"am":"pm"},A:function(){return m.getHours()<12?"AM":"PM"},g:function(){return m.getHours()%12||12},G:function(){return m.getHours()},h:function(){return((m.getHours()%12||12)<10?"0":"")+(m.getHours()%12||12)},H:function(){return(m.getHours()<10?"0":"")+m.getHours()},i:function(){return(m.getMinutes()<10?"0":"")+m.getMinutes()},s:function(){return(m.getSeconds()<10?"0":"")+m.getSeconds()},O:function(){return(-m.getTimezoneOffset()<0?"-":"+")+(Math.abs(m.getTimezoneOffset()/60)<10?"0":"")+(Math.abs(m.getTimezoneOffset()/60))+"00"},P:function(){return(-m.getTimezoneOffset()<0?"-":"+")+(Math.abs(m.getTimezoneOffset()/60)<10?"0":"")+(Math.abs(m.getTimezoneOffset()/60))+":"+(Math.abs(m.getTimezoneOffset()%60)<10?"0":"")+(Math.abs(m.getTimezoneOffset()%60))},T:function(){var q=m.getMonth();m.setMonth(0);var p=m.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1");m.setMonth(q);return p},Z:function(){return -m.getTimezoneOffset()*60},r:function(){return m.toString()},U:function(){return m.getTime()/1000}};return function(q,t){var s="",p="";m=q;for(var r=0;r<t.length;r+=1){p=t.charAt(r);if(n[p]){s+=n[p]()}else{s+=p}}return s}})();e.Connected.Utils={queryStringAsObject:function(p){p=(p||e.location.search).substr(1);var l,n,o;if(p===""){return{}}this.queryStringAsObject.cache=this.queryStringAsObject.cache||{};n=this.queryStringAsObject.cache[p];if(n){return n}n={};l=p.split("&");if(l.length===0){return{}}for(var m=0;m<l.length;++m){o=l[m].split("=");n[o[0]]=decodeURIComponent(o[1].replace(/\+/g," "))}return n},csrfForAjax:function(){c(e.document).ajaxSend(function(m,n,l){n.setRequestHeader("X_CSRF_TOKEN",(LI.readCookie("JSESSIONID")||"").replace(/"/g,""))})},convertStringToType:function(m,l){if(l===Object||l===Array){return JSON.parse(m)}else{if(l===Number){return +m}else{if(l===Boolean){if(m==="true"){return true}else{if(m==="false"){return false}else{return null}}}else{return m}}}},getData:function(m,o){var t=c(m).get(0);if(!t){return null}var q=t.attributes,v,l,w,n,u,x,p={},s=o||{};if(t.nodeType!==1){return p}for(var r=0;r<q.length;r++){v=q[r];l=v.name;if(l.indexOf("data-")!==0){continue}w=t.getAttribute(l);x=jQuery.camelCase(l.substring(5));u=s[x]||String;n=Connected.Utils.convertStringToType(w,u);p[x]=n}return p},encodeHTML:g,encodeURIComponent:h,sanitizeHTML:function(l){return b(l,i)},getStaticUrl:function(l){return e.STATIC_URL+l},dateFormat:a};if(e.Contacts&&e.Contacts.Utils){e.Contacts.Utils=e.Connected.Utils}})(window,jQuery);(function(b,c){b.Contacts.Constants=c.extend(b.Contacts.Constants||{},{HOME_URL:"/contacts/",CONTACT_URL:"{0}/contact/?id={1}",CONTACT_MERGE_URL:"/contacts/services/apps/linkedin_search/select_linkedin_profile/?linkedin_profile={0}&contact={1}&auth-name={2}&auth-value={3}",CONTACT_DELETE:"/contacts/api/contacts/{0}/?method=delete",CONTACT_LINKEDIN_SEARCH_URL:"/contacts/api/linkedin_search/?name={0}",GHOST_PROFILE_IMAGE_SMALL:"https://static.licdn.com/scds/common/u/images/themes/katy/ghosts/person/ghost_person_60x60_v1.png",URL_PROTOCOL_REGEX:/^https?:\/\//i,URL_REGEX:/^https?:\/\/([a-z0-9\-]+)\.*?[a-z0-9\-]+\.[a-z]{2,6}.*$/i,EMAIL_REGEX:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,5}/i});var a=Connected.Utils.getData("#lnkd-contacts-base-page-config")||{};var e;if(!/^https/.test(a.urlPath)){e=a.urlPath?a.urlPath.split(":").join("s:"):a.urlPath}var d={CONNECTED_SERVICE_PREFIX:a.connectedServicePrefix||"/contacts",STATIC_URL:a.staticUrl||"",URL_PATH:a.urlPath||"",SECURE_URL_PATH:e||"",FACEBOOK_PERMISSIONS:a.facebookPermissions||"",FACEBOOK_API_KEY:a.facebookApiKey||"",DEFAULT_IMAGE_URL:a.defaultImageUrl||"https://static.licdn.com/scds/common/u/images/themes/katy/ghosts/person/ghost_person_100x100_v1.png",MIN_VIEWPORT_WIDTH:"1224",IS_REDESIGN_ENABLED:a.isRedesignEnabled||""};b.Contacts.Constants=c.extend(b.Contacts.Constants,d)})(window,jQuery);(function(a,b){a.Contacts=b.extend(true,{Constants:{},Utils:{},UI:{},UIControls:{},App:{},API:{}},a.Contacts||{})})(window,window.jQuery);window.CONSTANTS={};CONSTANTS.SHOW_INFO_INTERVAL=5000;CONSTANTS.ENTER_KEYCODE=13;CONSTANTS.ESCAPE_KEYCODE=27;if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}String.formatWithEscapeFunction=function(b){return function a(){var f=this;var c=Array.prototype.slice.call(arguments,0);if(!(this instanceof window.String)){f=c.shift()}for(var d=0;d<c.length;d++){var e=new RegExp("\\{"+d+"\\}","gm");f=f.replace(e,b?b(c[d]):c[d])}return f}};String.format=String.prototype.format=String.formatWithEscapeFunction(null);String.formatWithHtmlEscape=String.prototype.formatWithHtmlEscape=String.formatWithEscapeFunction(Connected.Utils.encodeHTML);String.formatWithUriEscape=String.prototype.formatWithUriEscape=String.formatWithEscapeFunction(Connected.Utils.encodeURIComponent);(function(c,b){var a=Fiber.extend(function(){var f;var e=['<div id="dialog-wrapper-contacts" class="dialog-v2 contacts-dialog">','  <div class="dialog-mask dialog-task-modal">','    <div class="dialog-window">','      <div class="dialog-title">','        <span class="dialog-close"></span>','        <h3 class="title"></h3>',"      </div>",'      <div class="dialog-body" style="">','        <div class="dialog-message" style="display: none;"></div>','        <div class="dialog-content">',"        </div>",'        <div class="dialog-actions" style="display: none;"></div>',"      </div>","    </div>","  </div>","</div>"].join("");var d={template:e,isModal:true,title:""};return{init:function(h,g){this.$el=h;this.options=c.extend({},d,g);this.$dialog=c(this.options.template);this.$dialog.hide();this.$dialogWindow=this.$dialog.find(".dialog-window");this.$closeButton=this.$dialog.find("span.dialog-close");this.$content=this.$dialog.find(".dialog-content");this.$title=this.$dialog.find(".dialog-title .title");this.$title.text(this.options.title);this.appendContent();this.$closeButton.on("click",c.proxy(this.close,this));this.isAttached=false},appendContent:function(){this.$content.append(this.$el);this.$el.show()},attachToBody:function(){if(this.isAttached){return}this.$dialog.appendTo(c(document.body));this.isAttached=true},open:function(){if(f&&f!==this){f.close()}f=this;if(this.isOpen){return}this.isOpen=false;this.attachToBody();this.$dialog.show();var g=this.$dialogWindow.width();this.$dialogWindow.css({"margin-left":-g/2+2});this.trigger("opened")},close:function(g){f=null;this.$dialog.hide();this.isOpen=false;this.trigger("closed",g)}}});Fiber.mixin(a,Mixins.Event);b.UIControls=c.extend({},b.UIControls,{Dialog:a});if(b.Contacts){b.Contacts.UIControls=b.UIControls}})(jQuery,window);(function(c){function d(e){return c.map(e,function(f){return f.id+"|"+f.type})}window.Connected=window.Connected||{};c.extend(Connected,{API:{}});c(document).ajaxSend(function(g,j,f){function i(l){var n=document.location.host,o=document.location.protocol,m="//"+n,k=o+m;return(l===k||l.slice(0,k.length+1)===k+"/")||(l===m||l.slice(0,m.length+1)===m+"/")||!(/^(\/\/|http:|https:).*/.test(l))}function h(k){return(/^(GET|HEAD|OPTIONS|TRACE)$/.test(k))}if(!h(f.type)&&i(f.url)){var e=(LI.readCookie("csrftoken")||"").replace(/"/g,"");j.setRequestHeader("X-CSRFToken",e)}});function a(f,h,g){var e=c.Deferred();f=(window.url_path||"")+(window.CONNECTED_SERVICE_PREFIX||"")+f;function i(j){if(j.status==="success"){e.resolve(j)}else{e.reject(j.status_details||"An unspecified error occured")}}c.ajax({url:f,type:g||"GET",data:h,cache:false,success:i,error:i});return e.promise()}var b="/services/edit_contact_data/";Connected.API.Contact={sendEmail:function(f,e){return a("/services/send_message/",{contact_id:f,type:"Email",email_server_id:e.serverId,email:e.email,cc:e.cc,bcc:e.bcc,subject:e.subject,message:e.message},"POST")},sendLinkedInMessage:function(g,e,f){return a("/services/send_message/",{contact_id:g,type:"LinkedIn Message",subject:e,message:f},"POST")},sendTweet:function(f,e){return a("/services/send_message/",{contact_id:f,type:"Twitter Mention",message:e},"POST")}};Connected.API.Contacts={create:function(e){return a("/services/add_contact/",e,"POST")},hide:function(e){return a("/services/hide_contacts/",{contact_ids:e.join(",")},"POST")},remove:function(e){return c.ajax({url:String.formatWithUriEscape("/contacts/api/contacts/{0}/?method=delete",e),type:"POST",cache:false})},unhide:function(e){return a("/services/unhide_contacts/",{contact_ids:e.join(",")},"POST")},tag:function(f,e){return c.ajax({url:String.formatWithUriEscape("/contacts/api/contacts/{0}/tags/",e),data:JSON.stringify({tag_ids:f instanceof Array?f:[f]}),type:"POST",cache:false})},getContacts:function(f,e){return a("/services/get_search_contacts/",{existing_contact_id:f,filter:e})},getSearchSourceContacts:function(e){return a("/services/contact_editor_search_source_contacts/",{contact_id:e})},getMergedContactsData:function(e){return a("/services/contact_editor_merged_contact_data/",{contact_id:e})},merge:function(e){if(e instanceof Array){return a("/services/merge_contacts/",{contact_ids:e.join(",")},"POST")}return a("/services/merge_contact/",{existing_merged_id:e.existingMergedId,existing_ids:e.existingIds.join(","),new_ids:e.newIds.join(","),search_merged_id:e.searchMergedId||"",search_ids:e.searchIds.join(","),existing_merged_contact_data_ids:d(e.existingMergedContactDataIds).join(";"),new_merged_contact_data_ids:d(e.newMergedContactDataIds).join(";"),search_merged_contact_data_ids:d(e.searchMergedContactDataIds).join(";")},"POST")},mergePairs:function(e){return a("/services/merge_pairs/",{merge_pairs:e.join(";")},"POST")}};Connected.API.Tag={setName:function(f,e){return a(String.formatWithUriEscape("/api/tags/{0}/?method=put",f),JSON.stringify({name:e}),"POST")},remove:function(e){return a(String.formatWithUriEscape("/api/tags/{0}/?method=delete",e),{},"POST")}};Connected.API.Tags={create:function(f){var e=c.Deferred();a("/api/tags/",JSON.stringify({name:f}),"POST").done(function(g){e.resolve(g.tag_id)}).fail(function(g){e.reject(g)});return e.promise()}};Connected.API.Evernote={remove:function(e){return a("/services/evernote_delete/?evernote_id="+e,{},"POST")}};Connected.API.Locations={merge:function(e,f){return a("/services/merge_locations/",{location_names:JSON.stringify(e),primary_location:f},"POST")}};Connected.API.Companies={merge:function(f,e){return a("/services/merge_companies/",{company_ids:f.join(","),primary_companyId:e},"POST")}};Connected.API.Calendars={save:function(e){return a("/services/gcalendar/save_calendars/",{calendars:e.join(",")})}};Connected.API.Connect={linkedin:function(e){return a("/services/apps/linkedin_search/connect_linkedin_profile/",e,"POST")},facebookBirthday:function(e){return a("/services/facebook_birthdays_connect/",{url:e},"POST")},yahooCalendar:function(e){return a("/services/yahoo_calendar_connect/",{url:e},"POST")},googleVoice:function(f,e){return a("/services/gvoice_connect/",{gvoice_email:f,gvoice_password:e},"POST")}};Connected.API.Preferences={setTimezone:function(f,e){return a("/update_timezone/",{timezone_name:f,override:e},"POST")}};Connected.API.Integrations={getIntegrationDetails:function(e){return a("/services/integration_details/",{service:e})},closePromoSettings:function(e){return a("/services/closed_contacts_page_promo_settings/",{promo_type:e})},saveFacebookCredentials:function(){return a("/services/save_facebook_credentials/")},verifyServiceCredentials:function(e){return a("/services/verify_service_credentials/",{service:e})},verifyServiceCredentialsSimplified:function(f){var e=c.Deferred();Connected.API.Integrations.verifyServiceCredentials(f).done(function(g){var h=true;c.each(g.details,function(){if(!this.valid){h=false;return false}});if(!h){e.reject()}else{e.resolve()}});return e.promise()},setGoogleContactsType:function(e){return a("/services/gcontacts/save_contacts/",{contacts:e})},emailResolve:function(e){return a("/services/zeppelin_email_resolve/",{email:e})}};Connected.API.Integrations.MSOutlook={setCredentials:function(f,h,e,g){return a("/services/msoutlook_ews_connect/",{msoutlook_email:f,msoutlook_username:h,msoutlook_password:e,msoutlook_webmail_url:g},"POST")}};Connected.API.Reminder={setComplete:function(e){return a("/services/apps/reminders/complete_reminder/",{reminder_id:e})}};Connected.API.EngageEvent={_setResolved:function(f,e){return c.ajax({url:"/contacts/api/engagements/",type:"POST",data:JSON.stringify({engage_event_id:f,dismiss_event:e}),cache:false})},setComplete:function(e){return this._setResolved(e,false)},setDismissed:function(e){return this._setResolved(e,true)}}})(jQuery);(function(a){window.Connected=window.Connected||{};a.extend(Connected,{UI:{}});a(function(){Connected.UI.Notification=(function(){var c=5000;return{show:function(f){var g="";var e=null;f=Connected.Utils.sanitizeHTML(f);switch(arguments.length){case 2:var d=arguments[1];if(typeof d==="boolean"){e=d}else{g=d}break;case 3:g=arguments[1];e=arguments[2];break}LI.injectAlert(f,g,null,false,true);if(e||(e===null)){window.setTimeout(Connected.UI.Notification.hide,c)}},hide:function(){LI.removeAlert()}}})()});function b(d,f,e){d=(window.url_path||"")+(window.CONNECTED_SERVICE_PREFIX||"")+d;var c=a.Deferred();a.ajax({url:d,type:e||"GET",dataType:"html",data:f,cache:false}).success(function(g){c.resolve(g)}).error(function(){c.reject()});return c.promise()}(function(){var e={addEnter:function(i,g){var f=i.find(g.actionButton).filter(":visible:first"),h=i.find("input[type=text], input[type=textbox], input[type=password]").filter(":visible");if(f.length===0||h.length===0){return}h.off("keydown.dialog").on("keydown.dialog",function(j){if(j.keyCode===CONSTANTS.ENTER_KEYCODE&&!j.shiftKey){f.trigger("click");return false}})}};function d(g){var f=g.find("input[tabindex=1],textarea[tabindex=1]").not(":input[type=button]").filter(":visible:first");if(f){setTimeout(function(){f.first().focus()},0)}}Connected.UI.Dialog={instance:null};var c=UIControls.Dialog.extend(function(g){var f=g.appendContent;return{appendContent:function(){},attachToBody:function(){g.attachToBody.apply(this,arguments);f.apply(this,arguments)}}});Connected.UI.Dialog.open=function(j,i){var f=a.Deferred(),k=(typeof j==="string"),i=a.extend({requestData:{},requestType:"GET",enter:false,actionButton:"input.save-button:visible, input.btn-linkedin:visible"},i);function g(m){var p=m.find("a.cancel-button");var o=m.find("h4.title");var n=new c(m,{title:o.text()});o.hide();n.open();n.on("closed",function(q){Connected.UI.Dialog.instance=null;q=q||{};if(k){m.remove()}});n.resize=function(){};Connected.UI.Dialog.instance=n;n.actionButton=m.find(i.actionButton);if(p.length){p.on("click",function(q){q.preventDefault();if(Connected.UI.Dialog.instance){Connected.UI.Dialog.instance.close()}})}return n}if(k){var h=false,l=setTimeout(function(){if(!h){Contacts.UI.Loader.show()}},150);b(j,i.requestData,i.requestType).done(function(m){h=true;Contacts.UI.Loader.hide();clearTimeout(l);f.resolve(g(a(a.trim(m))))}).fail(function(m){f.reject(m)})}else{f.resolve(g(a(j)))}return f.promise()};Connected.UI.Dialogs={openHelp:function(){return Connected.UI.Dialog.open("/services/apps/reminders/help_div/")},openLinkedInSearchHelp:function(){return Connected.UI.Dialog.open("/services/apps/linkedin_search/help_div/")},openAddContact:function(){return Connected.UI.Dialog.open("/services/add_contact_div/",{enter:true})},openMSOutlookEWSConnect:function(){return Connected.UI.Dialog.open("/services/msoutlook_ews_connect_div/",{enter:true})},openGoogleVoiceConnect:function(){return Connected.UI.Dialog.open("/services/gvoice_connect_div/",{enter:true})},openFacebookBirthdaysConnect:function(){return Connected.UI.Dialog.open("/services/facebook_birthdays_connect_div/",{enter:true})},openYahooCalendarConnect:function(){return Connected.UI.Dialog.open("/services/yahoo_calendar_connect_div/",{enter:true})},openConnectDialog:function(f){return Connected.UI.Dialog.open(String.formatWithUriEscape("/services/{0}_connect_div/",f),{enter:true})},openGoogleContactsSettings:function(){return Connected.UI.Dialog.open("/settings/gcontacts/",{enter:true})},openGoogleCalendarSettings:function(){return Connected.UI.Dialog.open("/settings/gcalendar/",{enter:true})},openSettingsDialog:function(f){return Connected.UI.Dialog.open(String.formatWithUriEscape("/settings/{0}/",f),{enter:true})},openImportContacts:function(f){return Connected.UI.Dialog.open(String.formatWithUriEscape("/services/import_contacts_file_div/?type={0}",f),{enter:true})},openSyncNow:function(g,f){return Connected.UI.Dialog.open(String.formatWithUriEscape("/services/sync_now_div/?integration_details_div={0}&service={1}",g,f))},openMessage:function(g,f){if(f){return Connected.UI.Dialog.open(String.formatWithUriEscape("/services/send_message_div/?message_type={0}&contact_id={1}",f,g),{enter:true})}else{return Connected.UI.Dialog.open(String.formatWithUriEscape("/services/send_message_div/?contact_id={0}",g),{enter:true})}},openMessageByEngageEventId:function(f,g){if(f){return Connected.UI.Dialog.open(String.formatWithUriEscape("/services/send_message_div/?&engage_event_id={0}",f),{enter:true,actionButton:g})}},openJobChangeMessage:function(h,g,i,f){return Connected.UI.Dialog.open(String.formatWithUriEscape("/services/send_message_div/?message_type={0}&contact_id={1}&thread_id={2}&update_time={3}",g,h,i,f),{enter:true})},openWorkAnniversary:function(i,h,k,g,f,j){return Connected.UI.Dialog.open(String.formatWithUriEscape("/services/send_message_div/?message_type={0}&contact_id={1}&thread_id={2}&update_time={3}&number_of_years={4}&since_month={5}",h,i,k,g,f,j),{enter:true})},openUpcomingTripMessage:function(j,h,g,i,f){return Connected.UI.Dialog.open(String.formatWithUriEscape("/services/send_message_div/?message_type={0}&contact_id={1}&start_date={2}&end_date={3}&destination={4}",h,j,g,i,f),{enter:true})},openNewsAboutNetworkMessage:function(i,g,h,f){return Connected.UI.Dialog.open(String.formatWithUriEscape("/services/send_message_div/?message_type={0}&contact_id={1}&source={2}&url={3}",g,i,h,f),{enter:true})},openEvernote:function(f){return Connected.UI.Dialog.open(String.formatWithUriEscape("/services/evernote_div/?evernote_id={0}",f))},openInteractionMessage:function(h,g,f){return Connected.UI.Dialog.open(String.formatWithUriEscape("/services/get_message_div/?source={0}&id={1}&contact_id={2}",g,f,h))},openCalendarEvent:function(f){return Connected.UI.Dialog.open(String.formatWithUriEscape("/services/get_calendar_event_div/?id={0}",f))},openRemoveIntegration:function(f,g){return Connected.UI.Dialog.open("/services/remove_integration_div/",{requestData:{service:f,remove_associated_data:g},requestType:"POST"})},openLocationChange:function(j,g,f,i,h,k){return Connected.UI.Dialog.open(String.formatWithUriEscape("/services/send_message_div/?message_type={0}&contact_id={1}&update_time={2}&new_location={3}&old_location={4}",g,j,f,i,h),{enter:true,actionButton:k})},openLinkedInConnect:function(f,g){return Connected.UI.Dialog.open(String.formatWithUriEscape("/services/linkedin_connect_div/?contact_id={0}",f),{enter:true,actionBUtton:g})},openLinkedInConnectWithoutContactId:function(h,f,g){return Connected.UI.Dialog.open("/services/linkedin_connect_div_without_contact_id/",{requestData:{invitee_linkedin_id:h,auth_name:f,auth_value:g},enter:true})}}})();(function(){var f={},c=1;Connected.UI.WindowProxy=(function(){function j(){var k=a(this);this.close=function(m,l){if(f[m]){f[m].resolve(l)}}}return new j()})();function d(m,l,k,n){var j=a.Deferred();++c;f[c]=j;m=m.replace(/{HASH}/g,c).replace(/{URL}/g,window.CONNECTED_SERVICE_PREFIX).replace(/{PROTO_HOST}/g,String.format("{0}://{1}",window.location.protocol.replace(":",""),window.location.host));window.open(m,l," height = "+k+", width = "+n);return j.promise()}var e="settings_integrations/";var i=e+"%3Fhash_index={HASH}";var h=e+"%3Fgmail_error=1";var g=e+"%3Fhash_index={HASH}%26result=denied";Connected.UI.IntegrationWindows={openLinkedInConnect:function(){return d("{URL}/oauth/linkedin/?success_redirect=settings_integrations/?hash_index={HASH}&failure_redirect=settings_integrations/","Integrate",200,425)},openTwitterConnect:function(){return d("{URL}/oauth/twitter/?app=contacts&success_redirect=settings_integrations/%3Fhash_index={HASH}&failure_redirect=settings_integrations/%3Fhash_index={HASH}%26result=denied","Integrate",450,450)},openGoogleContactsConnect:function(){return d("{URL}/oauth/gcontacts/?success_redirect=settings_integrations/?hash_index={HASH}&failure_redirect=settings_integrations/","Integrate",600,950)},openGoogleCalendarConnect:function(){return d("{URL}/oauth/gcalendar/?success_redirect=settings_integrations/?hash_index={HASH}&failure_redirect=settings_integrations/","Integrate",600,950)},openEvernoteConnect:function(){return d("{URL}/oauth/evernote/?success_redirect=settings_integrations/?hash_index={HASH}&failure_redirect=settings_integrations/","Integrate",225,525)},openConstantContactConnect:function(){return d("{URL}/oauth/constant_contact/?success_redirect=settings_integrations/?hash_index={HASH}&failure_redirect=settings_integrations/","Integrate",500,500)},openAWeberConnect:function(){return d("{URL}/oauth/aweber/?success_redirect=settings_integrations/?hash_index={HASH}&failure_redirect=settings_integrations/","Integrate",600,850)},openGmailConnect:function(){return d("{URL}/oauth/gmail/?success_redirect=settings_integrations/?hash_index={HASH}&failure_redirect=settings_integrations/%3Fgmail_error=1","Integrate",600,950)},openGoogleConnect:function(){return d("{URL}/oauth/google/?success_redirect=settings_integrations/?hash_index={HASH}&failure_redirect=settings_integrations/%3Fgmail_error=1","Integrate",600,950)},openTripItConnect:function(){return d("{URL}/oauth/tripit/?success_redirect=settings_integrations/?hash_index={HASH}&failure_redirect=settings_integrations/","Integrate",600,850)},openYahooContactsConnect:function(){return d(String.format("{URL}/oauth/yahoo_contacts/?success_redirect={0}&failure_redirect={1}",i,g),"Integrate",600,950)},open:function(k,p){function j(q){return function(){var r=a.Deferred();q().done(function(s){s.__currentDfd=r});return r.promise()}}function o(q){return function(){var r=a.Deferred();q().done(function(s){s.on("closed",function(u,t){if(t&&t.action==="done"){r.resolve()}})});return r.promise()}}function n(q){return function(){var r=a.Deferred();q();return r.promise()}}var m={linkedin:Connected.UI.IntegrationWindows.openLinkedInConnect,twitter:Connected.UI.IntegrationWindows.openTwitterConnect,gcontacts:Connected.UI.IntegrationWindows.openGoogleContactsConnect,gcalendar:Connected.UI.IntegrationWindows.openGoogleCalendarConnect,evernote:Connected.UI.IntegrationWindows.openEvernoteConnect,google:Connected.UI.IntegrationWindows.openGoogleConnect,email:Connected.UI.IntegrationWindows.openGmailConnect,gmail:Connected.UI.IntegrationWindows.openGmailConnect,tripit:Connected.UI.IntegrationWindows.openTripItConnect,yahoo:Connected.UI.IntegrationWindows.openYahooContactsConnect,yahoo_calendar:o(Connected.UI.Dialogs.openYahooCalendarConnect),facebook:function(){return Connected.UI.IntegrationWindows.openFacebookConnect(!!p)},mailchimp:o(Connected.UI.Dialogs.openMailChimpConnect),constant_contact:Connected.UI.IntegrationWindows.openConstantContactConnect,aweber:Connected.UI.IntegrationWindows.openAWeberConnect,facebook_birthdays:o(Connected.UI.Dialogs.openFacebookBirthdaysConnect),outlook_ews:o(Connected.UI.Dialogs.openMSOutlookEWSConnect),gvoice:o(Connected.UI.Dialogs.openGoogleVoiceConnect)};var l=["linkedin_csv","yahoo_csv","mac_address_book_vcard","msoutlook_mac","msoutlook_csv"];a.each(l,function(r,q){m[q]=n(function(){Connected.UI.Dialogs.openImportContacts(q)})});return m[k]()}}})();a(function(){var f=a(document.body),c=a(".wrapper-dropdown-list > ul > li"),e=a("#page"),h=c.offset()?c.offset().top:0;function d(k){k.stopImmediatePropagation();var o=a(this),j=o.find("ul"),n=o.scrollTop(),m=j.outerHeight(),i=a(window).height(),l=!!o.parents("#subheader_bulk_actions")[0];c=a(".wrapper-dropdown-list > ul > li");c.each(function(){var p=a(this);if(p[0]!==o[0]){if(p.hasClass("selected")){window.TagManagerBroadcaster.trigger("dropdown.blur",{el:p.find("ul")});p.removeClass("selected")}}});if(!a(k.target).is(".wrapper-dropdown-list input")&&!a(k.target).parent("li").is(".new_tag_link")){if(o.hasClass("selected")){window.TagManagerBroadcaster.trigger("dropdown.blur",{el:j})}else{window.TagManagerBroadcaster.trigger("dropdown.selected",{outOfViewport:(h-n+m>i),height:m,isBulk:l,bulkHeight:i-h-50,el:j})}if((a(k.target).closest("li.recurring-option")).data("li-value")!=="custom date"){o.toggleClass("selected")}}else{window.TagManagerBroadcaster.trigger("dropdown.selected",{outOfViewport:(h-n+m>i),height:m,isBulk:l,bulkHeight:i-h-50,el:j});o.addClass("selected")}}function g(i){c.each(function(){var j=a(this);if(j.hasClass("selected")){j.removeClass("selected");window.TagManagerBroadcaster.trigger("dropdown.blur",{el:j.find("ul")})}})}f.on("click",g);f.on("click",".wrapper-dropdown-list > ul > li",d)});(function(){var d=null,c=a(document.body);Connected.UI.CommandMenu=function(g,f){var e=this,h;this.options=a.extend({preventDefault:true},f);this.$anchor=g;this.$menu=g;this.$self=h=a(this);this.items={};this.count=0;this.optionsCount=0;this.$menu.find("li").each(function(){var l=a(this),k=l.data("item-type")||"option";e.items[l.data("item-id")]={id:l.data("item-id"),node:l,text:l.find("a").text(),type:k};e.count++;if(k==="option"){e.optionsCount++}});function j(k){k.stopImmediatePropagation();if(e.isVisible){e.hide();return}e.show();c.on("click.command-menu-close",function(){e.hide()})}function i(l){var n,m=a(l.target);if(m.is('input[type="checkbox"]')){n="itemchecked"}else{if(e.options.preventDefault){l.preventDefault()}n="itemclicked"}var k=e.items[a(this).data("item-id")];k=a.extend({event:l},k);h.trigger(n,k)}this.$menu.on("click","li",i)};Connected.UI.CommandMenu.templates={item:'<li data-item-id="{0}" data-item-name="{1}" data-item-type="option"><div class="checkbox-div"><input type="checkbox" /><label>&nbsp;</label></div><a href="#">{1}</a></li>'};Connected.UI.CommandMenu.prototype={removeItem:function(e){if(this.items[e]){if(this.items[e].type==="option"){this.optionsCount--;if(this.optionsCount===0){this.$menu.find(".separator").removeClass("separator")}}this.items[e].node.remove();delete this.items[e];this.count--}},addItem:function(j,i){var g=i?i:Connected.UI.CommandMenu.templates.item;var f=a(String.formatWithHtmlEscape(g,j.id,j.text));var h;var e=this.$menu.find('li[data-item-type="setting"]');if(e.length===0){this.$menu.prepend(f)}else{e.first().before(f)}this.items[j.id]={id:j.id,text:j.text,type:j.type||"option",node:f};h=f.next();if(h){h.addClass("separator")}this.count++;this.optionsCount++},updateItem:function(g){var f=this;var h=function(){var m=f.items[this.id];if(m!==undefined){delete f.items[this.id];f.items[this.newId]=m;var i=f.items[this.newId];i.id=this.newId;i.text=this.text;var p=i.node;p[0].attributes["data-item-id"].value=this.newId;p[0].attributes["data-item-name"].value=this.text;p.data("item-id",this.newId);p.data("item-name",this.text);if(p.find("input")[0]!==undefined&&p.find("input")[0].attributes.id){var n=p.find("input")[0].attributes.id.value;p.find("input")[0].attributes.id.value=n.replace(/item-.*$/,"item-"+this.newId)}var o=p.find("a");o.text(this.text);if(this.hasOwnProperty("glyph")){var k=a('<span class="glyph tag"></span>');o.prepend(k)}var j=o[0].attributes.href.value;var l=j.replace(/tag=.*$/,"tag="+this.newId);o[0].attributes.href.value=l}};var e=function(){var i=a("#profile_command_tag_menu").find('[data-item-id="'+this.id+'"]');if(i.length>0){i[0].attributes["data-item-id"]=this.newId;i.attr("data-item-id",this.newId);i.data("item-id",this.newId)}};if(g.hasOwnProperty("newId")){h.call(g);e.call(g)}else{if(this.items[g.id]){this.items[g.id].node.find("a").text(g.text);this.items[g.id].text=g.text}}},show:function(){},hide:function(){}}})();(function(){var c=new window.UIControls.Loader();a(function(){c.appendTo(document.body)});window.Contacts.UI.Loader={show:a.proxy(c.show,c),hide:a.proxy(c.hide,c)}})()})(jQuery);window.Broadcaster={$self:$({}),trigger:function(){this.$self.trigger.apply(this.$self,arguments)},on:function(){this.$self.on.apply(this.$self,arguments)},off:function(){this.$self.off.apply(this.$self,arguments)}};window.TagManagerBroadcaster=window.Broadcaster;(function(c){var b=false;function a(){var e=c(this),d=false,f=e[0].getAttribute("placeholder");if(typeof f==="undefined"){d=true}if(!b||d){f=f||e.attr("title");if(typeof f!=="undefined"&&f.length>0){e.off("focus.input_hint").off("blur.input_hint").on("focus.input_hint",function(){if(e.val()===f){e.val("").removeClass("watermark")}}).on("blur.input_hint",function(){if(e.val().length===0){e.addClass("watermark").val(f)}})}e.blur()}}c.fn.placeholderFix=function(){return c(this).each(function(){a.call(this)})};c.fn.input_hint=c.fn.placeholderFix;c(function(){if(!("placeholder" in document.createElement("input"))){c.each(c("input[type=text], textarea"),function(d,e){a.call(e)})}else{b=true}})})(jQuery);(function(g){var c="ScrollEvent",e=g(document.body),a=g(document),f=g(window),b={topTrigger:500,bottomTrigger:500,leftTrigger:500,rightTrigger:500,debouncePeriod:250,eventName:"scrolled",windowScroll:false,allScrollEvents:false};var d=Fiber.extend(function(){return{init:function(j,i){this.options=g.extend(b,i);this.prevEvtTopPos=0;this.prevEvtLeftPos=0;this.dom=g(j);this.defaultWindow=(j===f[0]||j===e[0])},add:function(){this.defaultWindow=!!this.options.windowScroll;var i=this,j=this.defaultWindow||this.options.windowScroll?g(window):this.dom;this.prevEvtTopPos=this.defaultWindow?f.scrollTop():this.dom.scrollTop();this.prevEvtLeftPos=this.defaultWindow?f.scrollLeft():this.dom.scrollLeft();j.on("scroll."+c,g.debounce(function(){i.scrolled(i.dom,i.defaultWindow,i.options)},this.options.debouncePeriod))},remove:function(){this.dom.off("scroll."+c)},calculateDirection:function(i,j){if(i!==this.prevEvtTopPos){return i<this.prevEvtTopPos?"up":"down"}else{if(j!==this.prevEvtLeftPos){return j<this.prevEvtLeftPos?"left":"right"}}return false},calculateDistances:function(k,n){var o=this.dom[0];var j=this.defaultWindow?a.height():o.scrollHeight,l=this.defaultWindow?a.width():o.scrollWidth,i=this.defaultWindow?f.height():o.clientHeight,m=this.defaultWindow?f.width():o.clientWidth;return{toTop:k,toBottom:j-k-i,toLeft:n,toRight:l-n-m}},scrolled:function(){var k=this.defaultWindow?f.scrollTop():this.dom.scrollTop(),j=this.defaultWindow?f.scrollLeft():this.dom.scrollLeft();var i=this.calculateDistances(k,j),l=this.calculateDirection(k,j);if(i.toTop<this.options.topTrigger&&this.prevEvtTopPos!==k){this.dom.trigger(this.options.eventName,{scrollPos:k,distance:i,direction:l})}if(i.toBottom<this.options.bottomTrigger&&this.prevEvtTopPos!==k){this.dom.trigger(this.options.eventName,{scrollPos:k,distance:i,direction:l})}if(i.toLeft<this.options.leftTrigger&&this.prevEvtLeftPos!==j){this.dom.trigger(this.options.eventName,{scrollPos:j,distance:i,direction:l})}if(i.toRight<this.options.rightTrigger&&this.prevEvtLeftPos!==j){this.dom.trigger(this.options.eventName,{scrollPos:j,distance:i,direction:l})}if(this.options.allScrollEvents){if(i.toTop>this.options.topTrigger&&i.toBottom>this.options.bottomTrigger&&this.prevEvtTopPos!==k){this.dom.trigger(this.options.eventName,{scrollPos:k,distance:i,direction:l})}if(i.toLeft>this.options.leftTrigger&&i.toRight>this.options.rightTrigger&&this.prevEvtLeftPos!==j){this.dom.trigger(this.options.eventName,{scrollPos:j,distance:i,direction:l})}}this.prevEvtLeftPos=j;this.prevEvtTopPos=k}}});var h=Fiber.extend(function(){return{register:function(k,i){var j=new d(k,i);j.add();return j},unregister:function(i){i.remove()}}});window.ScrollEvent=new h()})(jQuery);$(function(){function a(){var c=$("#right-ad-container .stickyRightAd").attr("src"),b=$("#right-ad-container");b.html("");var d=document.createElement("IFRAME");d.id="ad-contacts-pymk-fs-2";d.src=c;d.width=160;d.height=600;d.scrolling="no";d.frameborder=0;d.className="stickyRightAd";b.append($(d))}if(window.Broadcaster){window.Broadcaster.on("merged_contacts_table.paginate",a)}(function(){var k=$("#right-ad-container");if(k.length===0){return}var b=$("#contacts_page_key").val(),h="/csp/dtag?sz=160x600&ti=2&z="+b+"&p=1",d=160,j=10,g=$("#page").width()+2*(d+j),c=jQuery(window),f=false,e=false;function i(){var l=g<c.width();if(l&&!f){f=true;k.show();if(!e){k.html("");var m=document.createElement("IFRAME");m.id="ad-contacts-pymk-fs-2";m.src=h;m.width=160;m.height=600;m.scrolling="no";m.frameborder=0;m.className="stickyRightAd";k.append($(m));e=true}}else{if(!l&&f){f=false;k.hide()}}}$(window).resize($.debounce(i,400));i()})()});(function(){var a={};a.Types={YOUR_DAY_PROMO:"contacts-daily-promo",INTEGRATE_SOURCE_PROMO:"contacts-sources-promo",RELATIONSHIP_COLLAPSE:"contacts-relationship-collapse",RELATIONSHIP_EXPAND:"contacts-relationship-expand",RELATIONSHIP_VIEW:"contacts-relationship-view",RELATIONSHIP_TAB_TOGGLE:"contacts-relationship-tab-toggle",RELATIONSHIP_INPUT_ACTION_TOGGLE:"contacts-relationship-input-action-toggle",RELATIONSHIP_SEE_MORE:"contacts-relationship-see-more",SEND_MESSAGE_STATUS_UPDATE_LIKE:"contacts-apps-send-message-status-update-like",SEND_MESSAGE_STATUS_UPDATE_COMMENT:"contacts-apps-send-message-status-update-comment",NEWS_ABOUT_NETWORK_WRONG_PERSON:"contacts-daily-people-news-feedback-wrong-person",NEWS_ABOUT_NETWORK_ARTICLE_LINK:"contacts-daily-people-news-article-link"};a.track=function(d,b){var c={pageKey:d,event_type:"pageViewEventType",trackingInfo:b};return $.ajax({url:"/contacts/api/trackings/",type:"POST",data:JSON.stringify([c]),cache:false})};window.EventsTracking=a}());(function(){var u=this;var B=u.Backbone;var g=[];var D=g.push;var n=g.slice;var t=g.splice;var z;if(typeof exports!=="undefined"){z=exports}else{z=u.Backbone={}}z.VERSION="1.0.0";var L=u._;if(!L&&(typeof require!=="undefined")){L=require("underscore")}z.$=u.jQuery||u.Zepto||u.ender||u.$;z.noConflict=function(){u.Backbone=B;return this};z.emulateHTTP=false;z.emulateJSON=false;var J=z.Events={on:function(M,P,O){if(!x(this,"on",M,[P,O])||!P){return this}this._events||(this._events={});var N=this._events[M]||(this._events[M]=[]);N.push({callback:P,context:O,ctx:O||this});return this},once:function(N,Q,O){if(!x(this,"once",N,[Q,O])||!Q){return this}var M=this;var P=L.once(function(){M.off(N,P);Q.apply(this,arguments)});P._callback=Q;return this.on(N,P,O)},off:function(M,V,N){var T,U,W,S,R,O,Q,P;if(!this._events||!x(this,"off",M,[V,N])){return this}if(!M&&!V&&!N){this._events={};return this}S=M?[M]:L.keys(this._events);for(R=0,O=S.length;R<O;R++){M=S[R];if(W=this._events[M]){this._events[M]=T=[];if(V||N){for(Q=0,P=W.length;Q<P;Q++){U=W[Q];if((V&&V!==U.callback&&V!==U.callback._callback)||(N&&N!==U.context)){T.push(U)}}}if(!T.length){delete this._events[M]}}}return this},trigger:function(O){if(!this._events){return this}var N=n.call(arguments,1);if(!x(this,"trigger",O,N)){return this}var P=this._events[O];var M=this._events.all;if(P){b(P,N)}if(M){b(M,arguments)}return this},stopListening:function(P,M,R){var N=this._listeners;if(!N){return this}var O=!M&&!R;if(typeof M==="object"){R=this}if(P){(N={})[P._listenerId]=P}for(var Q in N){N[Q].off(M,R,this);if(O){delete this._listeners[Q]}}return this}};var w=/\s+/;var x=function(T,R,N,Q){if(!N){return true}if(typeof N==="object"){for(var P in N){T[R].apply(T,[P,N[P]].concat(Q))}return false}if(w.test(N)){var S=N.split(w);for(var O=0,M=S.length;O<M;O++){T[R].apply(T,[S[O]].concat(Q))}return false}return true};var b=function(R,P){var S,Q=-1,O=R.length,N=P[0],M=P[1],T=P[2];switch(P.length){case 0:while(++Q<O){(S=R[Q]).callback.call(S.ctx)}return;case 1:while(++Q<O){(S=R[Q]).callback.call(S.ctx,N)}return;case 2:while(++Q<O){(S=R[Q]).callback.call(S.ctx,N,M)}return;case 3:while(++Q<O){(S=R[Q]).callback.call(S.ctx,N,M,T)}return;default:while(++Q<O){(S=R[Q]).callback.apply(S.ctx,P)}}};var C={listenTo:"on",listenToOnce:"once"};L.each(C,function(M,N){J[N]=function(Q,O,S){var P=this._listeners||(this._listeners={});var R=Q._listenerId||(Q._listenerId=L.uniqueId("l"));P[R]=Q;if(typeof O==="object"){S=this}Q[M](O,S,this);return this}});J.bind=J.on;J.unbind=J.off;L.extend(z,J);var E=z.Model=function(M,O){var P;var N=M||{};O||(O={});this.cid=L.uniqueId("c");this.attributes={};L.extend(this,L.pick(O,F));if(O.parse){N=this.parse(N,O)||{}}if(P=L.result(this,"defaults")){N=L.defaults({},N,P)}this.set(N,O);this.changed={};this.initialize.apply(this,arguments)};var F=["url","urlRoot","collection"];L.extend(E.prototype,J,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(M){return L.clone(this.attributes)},sync:function(){return z.sync.apply(this,arguments)},get:function(M){return this.attributes[M]},escape:function(M){return L.escape(this.get(M))},has:function(M){return this.get(M)!=null},set:function(U,M,Y){var S,V,W,T,R,X,O,Q;if(U==null){return this}if(typeof U==="object"){V=U;Y=M}else{(V={})[U]=M}Y||(Y={});if(!this._validate(V,Y)){return false}W=Y.unset;R=Y.silent;T=[];X=this._changing;this._changing=true;if(!X){this._previousAttributes=L.clone(this.attributes);this.changed={}}Q=this.attributes,O=this._previousAttributes;if(this.idAttribute in V){this.id=V[this.idAttribute]}for(S in V){M=V[S];if(!L.isEqual(Q[S],M)){T.push(S)}if(!L.isEqual(O[S],M)){this.changed[S]=M}else{delete this.changed[S]}W?delete Q[S]:Q[S]=M}if(!R){if(T.length){this._pending=true}for(var P=0,N=T.length;P<N;P++){this.trigger("change:"+T[P],this,Q[T[P]],Y)}}if(X){return this}if(!R){while(this._pending){this._pending=false;this.trigger("change",this,Y)}}this._pending=false;this._changing=false;return this},unset:function(M,N){return this.set(M,void 0,L.extend({},N,{unset:true}))},clear:function(N){var M={};for(var O in this.attributes){M[O]=void 0}return this.set(M,L.extend({},N,{unset:true}))},hasChanged:function(M){if(M==null){return !L.isEmpty(this.changed)}return L.has(this.changed,M)},changedAttributes:function(O){if(!O){return this.hasChanged()?L.clone(this.changed):false}var Q,P=false;var N=this._changing?this._previousAttributes:this.attributes;for(var M in O){if(L.isEqual(N[M],(Q=O[M]))){continue}(P||(P={}))[M]=Q}return P},previous:function(M){if(M==null||!this._previousAttributes){return null}return this._previousAttributes[M]},previousAttributes:function(){return L.clone(this._previousAttributes)},fetch:function(N){N=N?L.clone(N):{};if(N.parse===void 0){N.parse=true}var M=this;var O=N.success;N.success=function(P){if(!M.set(M.parse(P,N),N)){return false}if(O){O(M,P,N)}M.trigger("sync",M,P,N)};H(this,N);return this.sync("read",this,N)},save:function(Q,N,U){var R,M,T,O=this.attributes;if(Q==null||typeof Q==="object"){R=Q;U=N}else{(R={})[Q]=N}if(R&&(!U||!U.wait)&&!this.set(R,U)){return false}U=L.extend({validate:true},U);if(!this._validate(R,U)){return false}if(R&&U.wait){this.attributes=L.extend({},O,R)}if(U.parse===void 0){U.parse=true}var P=this;var S=U.success;U.success=function(W){P.attributes=O;var V=P.parse(W,U);if(U.wait){V=L.extend(R||{},V)}if(L.isObject(V)&&!P.set(V,U)){return false}if(S){S(P,W,U)}P.trigger("sync",P,W,U)};H(this,U);M=this.isNew()?"create":(U.patch?"patch":"update");if(M==="patch"){U.attrs=R}T=this.sync(M,this,U);if(R&&U.wait){this.attributes=O}return T},destroy:function(N){N=N?L.clone(N):{};var M=this;var Q=N.success;var O=function(){M.trigger("destroy",M,M.collection,N)};N.success=function(R){if(N.wait||M.isNew()){O()}if(Q){Q(M,R,N)}if(!M.isNew()){M.trigger("sync",M,R,N)}};if(this.isNew()){N.success();return false}H(this,N);var P=this.sync("delete",this,N);if(!N.wait){O()}return P},url:function(){var M=L.result(this,"urlRoot")||L.result(this.collection,"url")||r();if(this.isNew()){return M}return M+(M.charAt(M.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(N,M){return N},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(M){return this._validate({},L.extend(M||{},{validate:true}))},_validate:function(O,N){if(!N.validate||!this.validate){return true}O=L.extend({},this.attributes,O);var M=this.validationError=this.validate(O,N)||null;if(!M){return true}this.trigger("invalid",this,M,L.extend(N||{},{validationError:M}));return false}});var a=["keys","values","pairs","invert","pick","omit"];L.each(a,function(M){E.prototype[M]=function(){var N=n.call(arguments);N.unshift(this.attributes);return L[M].apply(L,N)}});var c=z.Collection=function(N,M){M||(M={});if(M.url){this.url=M.url}if(M.model){this.model=M.model}if(M.comparator!==void 0){this.comparator=M.comparator}this._reset();this.initialize.apply(this,arguments);if(N){this.reset(N,L.extend({silent:true},M))}};var o={add:true,remove:true,merge:true};var K={add:true,merge:false,remove:false};L.extend(c.prototype,J,{model:E,initialize:function(){},toJSON:function(M){return this.map(function(N){return N.toJSON(M)})},sync:function(){return z.sync.apply(this,arguments)},add:function(N,M){return this.set(N,L.defaults(M||{},K))},remove:function(R,P){R=L.isArray(R)?R.slice():[R];P||(P={});var Q,M,O,N;for(Q=0,M=R.length;Q<M;Q++){N=this.get(R[Q]);if(!N){continue}delete this._byId[N.id];delete this._byId[N.cid];O=this.indexOf(N);this.models.splice(O,1);this.length--;if(!P.silent){P.index=O;N.trigger("remove",N,this,P)}this._removeReference(N)}return this},set:function(N,Z){Z=L.defaults(Z||{},o);if(Z.parse){N=this.parse(N,Z)}if(!L.isArray(N)){N=N?[N]:[]}var U,Q,W,X,O,V;var P=Z.at;var T=this.comparator&&(P==null)&&Z.sort!==false;var R=L.isString(this.comparator)?this.comparator:null;var Y=[],M=[],S={};for(U=0,Q=N.length;U<Q;U++){if(!(W=this._prepareModel(N[U],Z))){continue}if(O=this.get(W)){if(Z.remove){S[O.cid]=true}if(Z.merge){O.set(W.attributes,Z);if(T&&!V&&O.hasChanged(R)){V=true}}}else{if(Z.add){Y.push(W);W.on("all",this._onModelEvent,this);this._byId[W.cid]=W;if(W.id!=null){this._byId[W.id]=W}}}}if(Z.remove){for(U=0,Q=this.length;U<Q;++U){if(!S[(W=this.models[U]).cid]){M.push(W)}}if(M.length){this.remove(M,Z)}}if(Y.length){if(T){V=true}this.length+=Y.length;if(P!=null){t.apply(this.models,[P,0].concat(Y))}else{D.apply(this.models,Y)}}if(V){this.sort({silent:true})}if(Z.silent){return this}for(U=0,Q=Y.length;U<Q;U++){(W=Y[U]).trigger("add",W,this,Z)}if(V){this.trigger("sort",this,Z)}return this},reset:function(P,N){N||(N={});for(var O=0,M=this.models.length;O<M;O++){this._removeReference(this.models[O])}N.previousModels=this.models;this._reset();this.add(P,L.extend({silent:true},N));if(!N.silent){this.trigger("reset",this,N)}return this},push:function(N,M){N=this._prepareModel(N,M);this.add(N,L.extend({at:this.length},M));return N},pop:function(N){var M=this.at(this.length-1);this.remove(M,N);return M},unshift:function(N,M){N=this._prepareModel(N,M);this.add(N,L.extend({at:0},M));return N},shift:function(N){var M=this.at(0);this.remove(M,N);return M},slice:function(N,M){return this.models.slice(N,M)},get:function(M){if(M==null){return void 0}return this._byId[M.id!=null?M.id:M.cid||M]},at:function(M){return this.models[M]},where:function(M,N){if(L.isEmpty(M)){return N?void 0:[]}return this[N?"find":"filter"](function(O){for(var P in M){if(M[P]!==O.get(P)){return false}}return true})},findWhere:function(M){return this.where(M,true)},sort:function(M){if(!this.comparator){throw new Error("Cannot sort a set without a comparator")}M||(M={});if(L.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(L.bind(this.comparator,this))}if(!M.silent){this.trigger("sort",this,M)}return this},sortedIndex:function(M,P,N){P||(P=this.comparator);var O=L.isFunction(P)?P:function(Q){return Q.get(P)};return L.sortedIndex(this.models,M,O,N)},pluck:function(M){return L.invoke(this.models,"get",M)},fetch:function(M){M=M?L.clone(M):{};if(M.parse===void 0){M.parse=true}var O=M.success;var N=this;M.success=function(P){var Q=M.reset?"reset":"set";N[Q](P,M);if(O){O(N,P,M)}N.trigger("sync",N,P,M)};H(this,M);return this.sync("read",this,M)},create:function(N,M){M=M?L.clone(M):{};if(!(N=this._prepareModel(N,M))){return false}if(!M.wait){this.add(N,M)}var P=this;var O=M.success;M.success=function(Q){if(M.wait){P.add(N,M)}if(O){O(N,Q,M)}};N.save(null,M);return N},parse:function(N,M){return N},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(O,N){if(O instanceof E){if(!O.collection){O.collection=this}return O}N||(N={});N.collection=this;var M=new this.model(O,N);if(!M._validate(O,N)){this.trigger("invalid",this,O,N);return false}return M},_removeReference:function(M){if(this===M.collection){delete M.collection}M.off("all",this._onModelEvent,this)},_onModelEvent:function(O,N,P,M){if((O==="add"||O==="remove")&&P!==this){return}if(O==="destroy"){this.remove(N,M)}if(N&&O==="change:"+N.idAttribute){delete this._byId[N.previous(N.idAttribute)];if(N.id!=null){this._byId[N.id]=N}}this.trigger.apply(this,arguments)}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];L.each(y,function(M){c.prototype[M]=function(){var N=n.call(arguments);N.unshift(this.models);return L[M].apply(L,N)}});var k=["groupBy","countBy","sortBy"];L.each(k,function(M){c.prototype[M]=function(P,N){var O=L.isFunction(P)?P:function(Q){return Q.get(P)};return L[M](this.models,O,N)}});var G=z.View=function(M){this.cid=L.uniqueId("view");this._configure(M||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var v=/^(\S+)\s*(.*)$/;var e=["model","collection","el","id","attributes","className","tagName","events"];L.extend(G.prototype,J,{tagName:"div",$:function(M){return this.$el.find(M)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(M,N){if(this.$el){this.undelegateEvents()}this.$el=M instanceof z.$?M:z.$(M);this.el=this.$el[0];if(N!==false){this.delegateEvents()}return this},delegateEvents:function(Q){if(!(Q||(Q=L.result(this,"events")))){return this}this.undelegateEvents();for(var P in Q){var R=Q[P];if(!L.isFunction(R)){R=this[Q[P]]}if(!R){continue}var O=P.match(v);var N=O[1],M=O[2];R=L.bind(R,this);N+=".delegateEvents"+this.cid;if(M===""){this.$el.on(N,R)}else{this.$el.on(N,M,R)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_configure:function(M){if(this.options){M=L.extend({},L.result(this,"options"),M)}L.extend(this,L.pick(M,e));this.options=M},_ensureElement:function(){if(!this.el){var M=L.extend({},L.result(this,"attributes"));if(this.id){M.id=L.result(this,"id")}if(this.className){M["class"]=L.result(this,"className")}var N=z.$("<"+L.result(this,"tagName")+">").attr(M);this.setElement(N,false)}else{this.setElement(L.result(this,"el"),false)}}});z.sync=function(S,N,M){var P=j[S];L.defaults(M||(M={}),{emulateHTTP:z.emulateHTTP,emulateJSON:z.emulateJSON});var R={type:P,dataType:"json"};if(!M.url){R.url=L.result(N,"url")||r()}if(M.data==null&&N&&(S==="create"||S==="update"||S==="patch")){R.contentType="application/json";R.data=JSON.stringify(M.attrs||N.toJSON(M))}if(M.emulateJSON){R.contentType="application/x-www-form-urlencoded";R.data=R.data?{model:R.data}:{}}if(M.emulateHTTP&&(P==="PUT"||P==="DELETE"||P==="PATCH")){R.type="POST";if(M.emulateJSON){R.data._method=P}var O=M.beforeSend;M.beforeSend=function(T){T.setRequestHeader("X-HTTP-Method-Override",P);if(O){return O.apply(this,arguments)}}}if(R.type!=="GET"&&!M.emulateJSON){R.processData=false}if(R.type==="PATCH"&&window.ActiveXObject&&!(window.external&&window.external.msActiveXFilteringEnabled)){R.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}var Q=M.xhr=z.ajax(L.extend(R,M));N.trigger("request",N,Q,M);return Q};var j={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};z.ajax=function(){return z.$.ajax.apply(z.$,arguments)};var p=z.Router=function(M){M||(M={});if(M.routes){this.routes=M.routes}this._bindRoutes();this.initialize.apply(this,arguments)};var q=/\((.*?)\)/g;var s=/(\(\?)?:\w+/g;var d=/\*\w+/g;var h=/[\-{}\[\]+?.,\\\^$|#\s]/g;L.extend(p.prototype,J,{initialize:function(){},route:function(N,O,P){if(!L.isRegExp(N)){N=this._routeToRegExp(N)}if(L.isFunction(O)){P=O;O=""}if(!P){P=this[O]}var M=this;z.history.route(N,function(R){var Q=M._extractParameters(N,R);P&&P.apply(M,Q);M.trigger.apply(M,["route:"+O].concat(Q));M.trigger("route",O,Q);z.history.trigger("route",M,O,Q)});return this},navigate:function(N,M){z.history.navigate(N,M);return this},_bindRoutes:function(){if(!this.routes){return}this.routes=L.result(this,"routes");var N,M=L.keys(this.routes);while((N=M.pop())!=null){this.route(N,this.routes[N])}},_routeToRegExp:function(M){M=M.replace(h,"\\$&").replace(q,"(?:$1)?").replace(s,function(O,N){return N?O:"([^/]+)"}).replace(d,"(.*?)");return new RegExp("^"+M+"$")},_extractParameters:function(M,N){var O=M.exec(N).slice(1);return L.map(O,function(P){return P?decodeURIComponent(P):null})}});var i=z.History=function(){this.handlers=[];L.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var A=/^[#\/]|\s+$/g;var f=/^\/+|\/+$/g;var I=/msie [\w.]+/;var m=/\/$/;i.started=false;L.extend(i.prototype,J,{interval:50,getHash:function(N){var M=(N||this).location.href.match(/#(.*)$/);return M?M[1]:""},getFragment:function(O,N){if(O==null){if(this._hasPushState||!this._wantsHashChange||N){O=this.location.pathname;var M=this.root.replace(m,"");if(!O.indexOf(M)){O=O.substr(M.length)}}else{O=this.getHash()}}return O.replace(A,"")},start:function(O){if(i.started){throw new Error("Backbone.history has already been started")}i.started=true;this.options=L.extend({},{root:"/"},this.options,O);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var N=this.getFragment();var M=document.documentMode;var Q=(I.exec(navigator.userAgent.toLowerCase())&&(!M||M<=7));this.root=("/"+this.root+"/").replace(f,"/");if(Q&&this._wantsHashChange){this.iframe=z.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(N)}if(this._hasPushState){z.$(window).on("popstate",this.checkUrl)}else{if(this._wantsHashChange&&("onhashchange" in window)&&!Q){z.$(window).on("hashchange",this.checkUrl)}else{if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}}}this.fragment=N;var R=this.location;var P=R.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!P){this.fragment=this.getFragment(null,true);this.location.replace(this.root+this.location.search+"#"+this.fragment);return true}else{if(this._wantsPushState&&this._hasPushState&&P&&R.hash){this.fragment=this.getHash().replace(A,"");this.history.replaceState({},document.title,this.root+this.fragment+R.search)}}if(!this.options.silent){return this.loadUrl()}},stop:function(){z.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);i.started=false},route:function(M,N){this.handlers.unshift({route:M,callback:N})},checkUrl:function(N){var M=this.getFragment();if(M===this.fragment&&this.iframe){M=this.getFragment(this.getHash(this.iframe))}if(M===this.fragment){return false}if(this.iframe){this.navigate(M)}this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(O){var N=this.fragment=this.getFragment(O);var M=L.any(this.handlers,function(P){if(P.route.test(N)){P.callback(N);return true}});return M},navigate:function(O,N){if(!i.started){return false}if(!N||N===true){N={trigger:N}}O=this.getFragment(O||"");if(this.fragment===O){return}this.fragment=O;var M=this.root+O;if(this._hasPushState){this.history[N.replace?"replaceState":"pushState"]({},document.title,M)}else{if(this._wantsHashChange){this._updateHash(this.location,O,N.replace);if(this.iframe&&(O!==this.getFragment(this.getHash(this.iframe)))){if(!N.replace){this.iframe.document.open().close()}this._updateHash(this.iframe.location,O,N.replace)}}else{return this.location.assign(M)}}if(N.trigger){this.loadUrl(O)}},_updateHash:function(M,O,P){if(P){var N=M.href.replace(/(javascript:|#).*$/,"");M.replace(N+"#"+O)}else{M.hash="#"+O}}});z.history=new i;var l=function(M,O){var N=this;var Q;if(M&&L.has(M,"constructor")){Q=M.constructor}else{Q=function(){return N.apply(this,arguments)}}L.extend(Q,N,O);var P=function(){this.constructor=Q};P.prototype=N.prototype;Q.prototype=new P;if(M){L.extend(Q.prototype,M)}Q.__super__=N.prototype;return Q};E.extend=c.extend=p.extend=G.extend=i.extend=l;var r=function(){throw new Error('A "url" property or function must be specified')};var H=function(O,N){var M=N.error;N.error=function(P){if(M){M(O,P,N)}O.trigger("error",O,P,N)}}}).call(this);!function(aR){function a6(a,b){return function(c){return aQ(a.call(this,c),b)}}function aX(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function aS(){}function a2(a){bb(this,a)}function aT(k){var g=k.years||k.year||k.y||0,d=k.months||k.month||k.M||0,l=k.weeks||k.week||k.w||0,f=k.days||k.day||k.d||0,b=k.hours||k.hour||k.h||0,h=k.minutes||k.minute||k.m||0,c=k.seconds||k.second||k.s||0,j=k.milliseconds||k.millisecond||k.ms||0;this._input=k,this._milliseconds=j+1000*c+60000*h+3600000*b,this._days=f+7*l,this._months=d+12*g,this._data={},this._bubble()}function bb(a,b){for(var c in b){b.hasOwnProperty(c)&&(a[c]=b[c])}return a}function aW(a){return 0>a?Math.ceil(a):Math.floor(a)}function aQ(a,b){for(var c=a+"";c.length<b;){c="0"+c}return c}function a3(k,g,d,l){var f,b,h=g._milliseconds,c=g._days,j=g._months;h&&k._d.setTime(+k._d+h*d),(c||j)&&(f=k.minute(),b=k.hour()),c&&k.date(k.date()+c*d),j&&k.month(k.month()+j*d),h&&!l&&aw.updateOffset(k),(c||j)&&(k.minute(f),k.hour(b))}function a7(a){return"[object Array]"===Object.prototype.toString.call(a)}function a8(b,f){var g,c=Math.min(b.length,f.length),a=Math.abs(b.length-f.length),d=0;for(g=0;c>g;g++){~~b[g]!==~~f[g]&&d++}return d+a}function a5(a){return a?aH[a]||a.toLowerCase().replace(/(.)s$/,"$1"):a}function aZ(a,b){return b.abbr=a,aM[a]||(aM[a]=new aS),aM[a].set(b),aM[a]}function bc(a){if(!a){return aw.fn._lang}if(!aM[a]&&aE){try{require("./lang/"+a)}catch(b){return aw.fn._lang}}return aM[a]}function aY(a){return a.match(/\[.*\]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function aK(a){var c,d,b=a.match(az);for(c=0,d=b.length;d>c;c++){b[c]=aO[b[c]]?aO[b[c]]:aY(b[c])}return function(e){var f="";for(c=0;d>c;c++){f+=b[c] instanceof Function?b[c].call(e,a):b[c]}return f}}function aq(a,c){function d(f){return a.lang().longDateFormat(f)||f}for(var b=5;b--&&ap.test(c);){c=c.replace(ap,d)}return aL[c]||(aL[c]=aK(c)),aL[c](a)}function a4(a,b){switch(a){case"DDDD":return ah;case"YYYY":return ad;case"YYYYY":return aG;case"S":case"SS":case"SSS":case"DDD":return av;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return al;case"a":case"A":return bc(b._l)._meridiemParse;case"X":return aD;case"Z":case"ZZ":return a1;case"T":return aU;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return au;default:return new RegExp(a.replace("\\",""))}}function aV(a){var c=(a1.exec(a)||[])[0],d=(c+"").match(ba)||["-",0,0],b=+(60*d[1])+~~d[2];return"+"===d[0]?-b:b}function aB(b,d,f){var c,a=f._a;switch(b){case"M":case"MM":a[1]=null==d?0:~~d-1;break;case"MMM":case"MMMM":c=bc(f._l).monthsParse(d),null!=c?a[1]=c:f._isValid=!1;break;case"D":case"DD":case"DDD":case"DDDD":null!=d&&(a[2]=~~d);break;case"YY":a[0]=~~d+(~~d>68?1900:2000);break;case"YYYY":case"YYYYY":a[0]=~~d;break;case"a":case"A":f._isPm=bc(f._l).isPM(d);break;case"H":case"HH":case"h":case"hh":a[3]=~~d;break;case"m":case"mm":a[4]=~~d;break;case"s":case"ss":a[5]=~~d;break;case"S":case"SS":case"SSS":a[6]=~~(1000*("0."+d));break;case"X":f._d=new Date(1000*parseFloat(d));break;case"Z":case"ZZ":f._useUTC=!0,f._tzm=aV(d)}null==d&&(f._isValid=!1)}function ac(a){var c,d,b=[];if(!a._d){for(c=0;7>c;c++){a._a[c]=b[c]=null==a._a[c]?2===c?1:0:a._a[c]}b[3]+=~~((a._tzm||0)/60),b[4]+=~~((a._tzm||0)%60),d=new Date(0),a._useUTC?(d.setUTCFullYear(b[0],b[1],b[2]),d.setUTCHours(b[3],b[4],b[5],b[6])):(d.setFullYear(b[0],b[1],b[2]),d.setHours(b[3],b[4],b[5],b[6])),a._d=d}}function aN(b){var d,f,c=b._f.match(az),a=b._i;for(b._a=[],d=0;d<c.length;d++){f=(a4(c[d],b).exec(a)||[])[0],f&&(a=a.slice(a.indexOf(f)+f.length)),aO[c[d]]&&aB(c[d],f,b)}a&&(b._il=a),b._isPm&&b._a[3]<12&&(b._a[3]+=12),b._isPm===!1&&12===b._a[3]&&(b._a[3]=0),ac(b)}function a0(b){var f,h,c,d,g,a=99;for(d=0;d<b._f.length;d++){f=bb({},b),f._f=b._f[d],aN(f),h=new a2(f),g=a8(f._a,h.toArray()),h._il&&(g+=h._il.length),a>g&&(a=g,c=h)}bb(b,c)}function aP(a){var c,d=a._i,b=at.exec(d);if(b){for(a._f="YYYY-MM-DD"+(b[2]||" "),c=0;4>c;c++){if(af[c][1].exec(d)){a._f+=af[c][0];break}}a1.exec(d)&&(a._f+=" Z"),aN(a)}else{a._d=new Date(d)}}function aj(b){var c=b._i,a=ax.exec(c);c===aR?b._d=new Date:a?b._d=new Date(+a[1]):"string"==typeof c?aP(b):a7(c)?(b._a=c.slice(0),ac(b)):b._d=c instanceof Date?new Date(+c):new Date(c)}function a9(b,d,f,c,a){return a.relativeTime(d||1,!!f,b,c)}function ak(k,g,d){var l=ag(Math.abs(k)/1000),f=ag(l/60),b=ag(f/60),h=ag(b/24),c=ag(h/365),j=45>l&&["s",l]||1===f&&["m"]||45>f&&["mm",f]||1===b&&["h"]||22>b&&["hh",b]||1===h&&["d"]||25>=h&&["dd",h]||45>=h&&["M"]||345>h&&["MM",ag(h/30)]||1===c&&["y"]||["yy",c];return j[2]=g,j[3]=k>0,j[4]=d,a9.apply({},j)}function ay(b,f,g){var c,a=g-f,d=g-b.day();return d>a&&(d-=7),a-7>d&&(d+=7),c=aw(b).add("d",d),{week:Math.ceil(c.dayOfYear()/7),year:c.year()}}function ao(a){var b=a._i,c=a._f;return null===b||""===b?null:("string"==typeof b&&(a._i=b=bc().preparse(b)),aw.isMoment(b)?(a=bb({},b),a._d=new Date(+b._d)):c?a7(c)?a0(a):aN(a):aj(a),new a2(a))}function aJ(a,b){aw.fn[a]=aw.fn[a+"s"]=function(c){var d=this._isUTC?"UTC":"";return null!=c?(this._d["set"+d+b](c),aw.updateOffset(this),this):this._d["get"+d+b]()}}function aC(a){aw.duration.fn[a]=function(){return this._data[a]}}function ar(a,b){aw.duration.fn["as"+a]=function(){return +this/b}}for(var aw,an,ai="2.1.0",ag=Math.round,aM={},aE="undefined"!=typeof module&&module.exports,ax=/^\/?Date\((\-?\d+)/i,ab=/(\-)?(\d*)?\.?(\d+)\:(\d+)\:(\d+)\.?(\d{3})?/,az=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,ap=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,au=/\d\d?/,av=/\d{1,3}/,ah=/\d{3}/,ad=/\d{1,4}/,aG=/[+\-]?\d{1,6}/,al=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,a1=/Z|[\+\-]\d\d:?\d\d/i,aU=/T/i,aD=/[\+\-]?\d+(\.\d{1,3})?/,at=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,am="YYYY-MM-DDTHH:mm:ssZ",af=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ba=/([\+\-]|\d\d)/gi,aa="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),aF={Milliseconds:1,Seconds:1000,Minutes:60000,Hours:3600000,Days:86400000,Months:2592000000,Years:31536000000},aH={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",M:"month",y:"year"},aL={},aA="DDD w W M D d".split(" "),aI="M D H h m s w W".split(" "),aO={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return aQ(this.year()%100,2)},YYYY:function(){return aQ(this.year(),4)},YYYYY:function(){return aQ(this.year(),5)},gg:function(){return aQ(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return aQ(this.weekYear(),5)},GG:function(){return aQ(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return aQ(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return ~~(this.milliseconds()/100)},SS:function(){return aQ(~~(this.milliseconds()/10),2)},SSS:function(){return aQ(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+aQ(~~(a/60),2)+":"+aQ(~~a%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+aQ(~~(10*a/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}};aA.length;){an=aA.pop(),aO[an+"o"]=aX(aO[an],an)}for(;aI.length;){an=aI.pop(),aO[an+an]=a6(aO[an],2)}for(aO.DDDD=a6(aO.DDD,3),aS.prototype={set:function(a){var b,c;for(c in a){b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b}},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var c,d,b;for(this._monthsParse||(this._monthsParse=[]),c=0;12>c;c++){if(this._monthsParse[c]||(d=aw([2000,c]),b="^"+this.months(d,"")+"|^"+this.monthsShort(d,""),this._monthsParse[c]=new RegExp(b.replace(".",""),"i")),this._monthsParse[c].test(a)){return c}}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var c,d,b;for(this._weekdaysParse||(this._weekdaysParse=[]),c=0;7>c;c++){if(this._weekdaysParse[c]||(d=aw([2000,1]).day(c),b="^"+this.weekdays(d,"")+"|^"+this.weekdaysShort(d,"")+"|^"+this.weekdaysMin(d,""),this._weekdaysParse[c]=new RegExp(b.replace(".",""),"i")),this._weekdaysParse[c].test(a)){return c}}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return !b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(c){return c.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase()[0]},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(b,d,f,c){var a=this._relativeTime[f];return"function"==typeof a?a(b,d,f,c):a.replace(/%d/i,b)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return ay(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6}},aw=function(a,b,c){return ao({_i:a,_f:b,_l:c,_isUTC:!1})},aw.utc=function(a,b,c){return ao({_useUTC:!0,_isUTC:!0,_l:c,_i:a,_f:b})},aw.unix=function(a){return aw(1000*a)},aw.duration=function(f,h){var k,g,d=aw.isDuration(f),b="number"==typeof f,j=d?f._input:b?{}:f,c=ab.exec(f);return b?h?j[h]=f:j.milliseconds=f:c&&(k="-"===c[1]?-1:1,j={y:0,d:~~c[2]*k,h:~~c[3]*k,m:~~c[4]*k,s:~~c[5]*k,ms:~~c[6]*k}),g=new aT(j),d&&f.hasOwnProperty("_lang")&&(g._lang=f._lang),g},aw.version=ai,aw.defaultFormat=am,aw.updateOffset=function(){},aw.lang=function(a,b){return a?(b?aZ(a,b):aM[a]||bc(a),aw.duration.fn._lang=aw.fn._lang=bc(a),void 0):aw.fn._lang._abbr},aw.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),bc(a)},aw.isMoment=function(a){return a instanceof a2},aw.isDuration=function(a){return a instanceof aT},aw.fn=a2.prototype={clone:function(){return aw(this)},valueOf:function(){return +this._d+60000*(this._offset||0)},unix:function(){return Math.floor(+this/1000)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return aq(aw(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!a8(this._a,(this._isUTC?aw.utc(this._a):aw(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){var b=aq(this,a||aw.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?aw.duration(+b,a):aw.duration(a,b),a3(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?aw.duration(+b,a):aw.duration(a,b),a3(this,c,-1),this},diff:function(d,h,j){var f,c,g=this._isUTC?aw(d).zone(this._offset||0):aw(d).local(),b=60000*(this.zone()-g.zone());return h=a5(h),"year"===h||"month"===h?(f=43200000*(this.daysInMonth()+g.daysInMonth()),c=12*(this.year()-g.year())+(this.month()-g.month()),c+=(this-aw(this).startOf("month")-(g-aw(g).startOf("month")))/f,c-=60000*(this.zone()-aw(this).startOf("month").zone()-(g.zone()-aw(g).startOf("month").zone()))/f,"year"===h&&(c/=12)):(f=this-g,c="second"===h?f/1000:"minute"===h?f/60000:"hour"===h?f/3600000:"day"===h?(f-b)/86400000:"week"===h?(f-b)/604800000:f),j?c:aW(c)},from:function(a,b){return aw.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(aw(),a)},calendar:function(){var a=this.diff(aw().startOf("day"),"days",!0),b=-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse";return this.format(this.lang().calendar(b,this))},isLeapYear:function(){var a=this.year();return 0===a%4&&0!==a%100||0===a%400},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?"string"==typeof a&&(a=this.lang().weekdaysParse(a),"number"!=typeof a)?this:this.add({d:a-b}):b},month:function(a){var b,c=this._isUTC?"UTC":"";return null!=a?"string"==typeof a&&(a=this.lang().monthsParse(a),"number"!=typeof a)?this:(b=this.date(),this.date(1),this._d["set"+c+"Month"](a),this.date(Math.min(b,this.daysInMonth())),aw.updateOffset(this),this):this._d["get"+c+"Month"]()},startOf:function(a){switch(a=a5(a)){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),this},endOf:function(a){return this.startOf(a).add(a,1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+aw(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+aw(a).startOf(b)},isSame:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)===+aw(a).startOf(b)},min:function(a){return a=aw.apply(null,arguments),this>a?this:a},max:function(a){return a=aw.apply(null,arguments),a>this?this:a},zone:function(a){var b=this._offset||0;return null==a?this._isUTC?b:this._d.getTimezoneOffset():("string"==typeof a&&(a=aV(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,b!==a&&a3(this,aw.duration(b-a,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},daysInMonth:function(){return aw.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(a){var b=ag((aw(this).startOf("day")-aw(this).startOf("year"))/86400000)+1;return null==a?b:this.add("d",a-b)},weekYear:function(a){var b=ay(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=ay(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=ay(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this._d.getDay()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},lang:function(a){return a===aR?this._lang:(this._lang=bc(a),this)}},an=0;an<aa.length;an++){aJ(aa[an].toLowerCase().replace(/s$/,""),aa[an])}aJ("year","FullYear"),aw.fn.days=aw.fn.day,aw.fn.months=aw.fn.month,aw.fn.weeks=aw.fn.week,aw.fn.isoWeeks=aw.fn.isoWeek,aw.fn.toJSON=aw.fn.toISOString,aw.duration.fn=aT.prototype={_bubble:function(){var f,j,k,g,d=this._milliseconds,h=this._days,b=this._months,c=this._data;c.milliseconds=d%1000,f=aW(d/1000),c.seconds=f%60,j=aW(f/60),c.minutes=j%60,k=aW(j/60),c.hours=k%24,h+=aW(k/24),c.days=h%30,b+=aW(h/30),c.months=b%12,g=aW(b/12),c.years=g},weeks:function(){return aW(this.days()/7)},valueOf:function(){return this._milliseconds+86400000*this._days+2592000000*(this._months%12)+31536000000*~~(this._months/12)},humanize:function(a){var b=+this,c=ak(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},add:function(a,b){var c=aw.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=aw.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=a5(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=a5(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:aw.fn.lang};for(an in aF){aF.hasOwnProperty(an)&&(ar(an,aF[an]),aC(an.toLowerCase()))}ar("Weeks",604800000),aw.duration.fn.asMonths=function(){return(+this-31536000000*this.years())/2592000000+12*this.years()},aw.lang("en",{ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),aE&&(module.exports=aw),"undefined"==typeof ender&&(this.moment=aw),"function"==typeof define&&define.amd&&define("moment",[],function(){return aw})}.call(this);
/* jQuery ellipsis - v1.0.12 - 2013-09-03
* https://github.com/STAR-ZERO/jquery-ellipsis
* Copyright (c) 2013 Kenji Abe; Licensed MIT */
!function(b){b.fn.ellipsis=function(a){var d={row:1,onlyFullWords:!1,"char":"...",callback:function(){}};return a=b.extend(d,a),this.each(function(){var v=b(this),u=v.text(),t=v.height();v.text("a");var s=parseFloat(v.css("lineHeight"),10),r=v.height(),q=s>r?s-r:0,p=q*(a.row-1)+r*a.row;if(p>=t){return v.text(u),a.callback.call(this),void 0}for(var o=1,n=u.length;n>o;){var m=Math.ceil((o+n)/2);v.text(u.slice(0,m)+a["char"]),v.height()<=p?o=m:n=m-1}u=u.slice(0,o),a.onlyFullWords&&(u=u.replace(/[\u00AD\w]+$/,"")),v.text(u+a["char"]),a.callback.call(this)}),this}}(jQuery);(function(k,m){var g="3.7.0";var d=k.html5||{};var h=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i;var c=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i;var q;var i="_html5shiv";var a=0;var o={};var e;(function(){try{var t=m.createElement("a");t.innerHTML="<xyz></xyz>";q=("hidden" in t);e=t.childNodes.length==1||(function(){(m.createElement)("a");var v=m.createDocumentFragment();return(typeof v.cloneNode=="undefined"||typeof v.createDocumentFragment=="undefined"||typeof v.createElement=="undefined")}())}catch(u){q=true;e=true}}());function f(t,v){var w=t.createElement("p"),u=t.getElementsByTagName("head")[0]||t.documentElement;w.innerHTML="x<style>"+v+"</style>";return u.insertBefore(w.lastChild,u.firstChild)}function l(){var t=j.elements;return typeof t=="string"?t.split(" "):t}function p(t){var u=o[t[i]];if(!u){u={};a++;t[i]=a;o[a]=u}return u}function n(w,t,v){if(!t){t=m}if(e){return t.createElement(w)}if(!v){v=p(t)}var u;if(v.cache[w]){u=v.cache[w].cloneNode()}else{if(c.test(w)){u=(v.cache[w]=v.createElem(w)).cloneNode()}else{u=v.createElem(w)}}return u.canHaveChildren&&!h.test(w)?v.frag.appendChild(u):u}function r(v,x){if(!v){v=m}if(e){return v.createDocumentFragment()}x=x||p(v);var y=x.frag.cloneNode(),w=0,u=l(),t=u.length;for(;w<t;w++){y.createElement(u[w])}return y}function s(t,u){if(!u.cache){u.cache={};u.createElem=t.createElement;u.createFrag=t.createDocumentFragment;u.frag=u.createFrag()}t.createElement=function(v){if(!j.shivMethods){return u.createElem(v)}return n(v,t,u)};t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+l().join().replace(/[\w\-]+/g,function(v){u.createElem(v);u.frag.createElement(v);return'c("'+v+'")'})+");return n}")(j,u.frag)}function b(t){if(!t){t=m}var u=p(t);if(j.shivCSS&&!q&&!u.hasCSS){u.hasCSS=!!f(t,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")}if(!e){s(t,u)}return t}var j={elements:d.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:g,shivCSS:(d.shivCSS!==false),supportsUnknownElements:e,shivMethods:(d.shivMethods!==false),type:"default",shivDocument:b,createElement:n,createDocumentFragment:r};k.html5=j;b(m)}(this,document));!function(L,K){var J,I,H,G,F,E,D,C,B,A,z=window.Sizzle||null,y=L[K],x="undefined",w=!1,v=typeof window.jQuery!==x,u=typeof window.sessionStorage!==x,t=window.document;A={smoothScroll:!0,scrollDuration:1000,scrollTopMargin:200,showCloseButton:!0,showPrevButton:!1,showNextButton:!0,bubbleWidth:280,bubblePadding:15,arrowWidth:20,skipIfNoElement:!0,cookieName:"hopscotch.tour.state"},y||(Array.isArray||(Array.isArray=function(b){return"[object Array]"===Object.prototype.toString.call(b)}),B=function(){w&&y.startTour()},E={addClass:function(h,g){var l,k,j,i;if(h.className){for(k=g.split(/\s+/),l=" "+h.className+" ",j=0,i=k.length;i>j;++j){l.indexOf(" "+k[j]+" ")<0&&(l+=k[j]+" ")}h.className=l.replace(/^\s+|\s+$/g,"")}else{h.className=g}},removeClass:function(h,g){var l,k,j,i;for(k=g.split(/\s+/),l=" "+h.className+" ",j=0,i=k.length;i>j;++j){l=l.replace(" "+k[j]+" "," ")}h.className=l.replace(/^\s+|\s+$/g,"")},getPixelValue:function(d){var c=typeof d;return"number"===c?d:"string"===c?parseInt(d,10):0},valOrDefault:function(d,c){return typeof d!==x?d:c},invokeCallbackArrayHelper:function(d){var c;return Array.isArray(d)&&(c=C[d[0]],"function"==typeof c)?c.apply(this,d.slice(1)):void 0},invokeCallbackArray:function(e){var d,f;if(Array.isArray(e)){if("string"==typeof e[0]){return E.invokeCallbackArrayHelper(e)}for(d=0,f=e.length;f>d;++d){E.invokeCallback(e[d])}}},invokeCallback:function(b){return"function"==typeof b?b():"string"==typeof b&&C[b]?C[b]():E.invokeCallbackArray(b)},invokeEventCallbacks:function(g,f){var j,i,h=D[g];if(f){return this.invokeCallback(f)}for(j=0,i=h.length;i>j;++j){this.invokeCallback(h[j].cb)}},getScrollTop:function(){var b;return b=typeof window.pageYOffset!==x?window.pageYOffset:t.documentElement.scrollTop},getScrollLeft:function(){var b;return b=typeof window.pageXOffset!==x?window.pageXOffset:t.documentElement.scrollLeft},getWindowHeight:function(){return window.innerHeight||t.documentElement.clientHeight},getWindowWidth:function(){return window.innerWidth||t.documentElement.clientWidth},addEvtListener:function(e,d,f){return e.addEventListener?e.addEventListener(d,f,!1):e.attachEvent("on"+d,f)},removeEvtListener:function(e,d,f){return e.removeEventListener?e.removeEventListener(d,f,!1):e.detachEvent("on"+d,f)},documentIsReady:function(){return"complete"===t.readyState||"interactive"===t.readyState},evtPreventDefault:function(b){b.preventDefault?b.preventDefault():event&&(event.returnValue=!1)},extend:function(e,d){var f;for(f in d){d.hasOwnProperty(f)&&(e[f]=d[f])}},getStepTargetHelper:function(d){var c;return/^[#\.]/.test(d)?t.querySelector?t.querySelector(d):v?(c=jQuery(d),c.length?c[0]:null):z?(c=new z(d),c.length?c[0]:null):/^#[a-zA-Z][\w-_:.]*$/.test(d)?t.getElementById(d.substring(1)):null:t.getElementById(d)},getStepTarget:function(f){var e;if(!f||!f.target){return null}if("string"==typeof f.target){return f.target=E.getStepTargetHelper(f.target),f.target}if(Array.isArray(f.target)){var h,g;for(h=0,g=f.target.length;g>h;h++){if("string"==typeof f.target[h]&&(e=E.getStepTargetHelper(f.target[h]))){return f.target=e,e}}return null}return f.target},getI18NString:function(b){return F[b]||G[b]},setState:function(g,f,j){var i,h="";u?sessionStorage.setItem(g,f):(j&&(i=new Date,i.setTime(i.getTime()+1000*60*60*24*j),h="; expires="+i.toGMTString()),t.cookie=g+"="+f+h+"; path=/")},getState:function(h){var g,l,k,j=h+"=",i=t.cookie.split(";");if(u){k=sessionStorage.getItem(h)}else{for(g=0;g<i.length;g++){for(l=i[g];" "===l.charAt(0);){l=l.substring(1,l.length)}if(0===l.indexOf(j)){k=l.substring(j.length,l.length);break}}}return k},clearState:function(b){u?sessionStorage.removeItem(b):this.setState(b,"",-1)}},E.addEvtListener(window,"load",B),D={next:[],prev:[],start:[],end:[],show:[],error:[],close:[]},C={},G={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",skipBtn:"Skip",closeTooltip:"Close"},F={},I=function(b){this.init(b)},I.prototype={isShowing:!1,currStep:void 0,_createButton:function(f,e){var h=t.createElement("button"),g="hopscotch-nav-button";return h.id=f,e&&(h.innerHTML=e),g+=f.indexOf("prev")>=0?" prev":" next",E.addClass(h,g),h},setPosition:function(Q){var P,O,N,M,s,r,q,p=6,o=E.getStepTarget(Q),n=this.element,h=this.arrowEl;P=E.getPixelValue(Q.width)||this.opt.bubbleWidth,N=E.valOrDefault(Q.padding,this.opt.bubblePadding),E.removeClass(n,"fade-in-down fade-in-up fade-in-left fade-in-right"),!Q.placement&&Q.orientation&&(Q.placement=Q.orientation),M=o.getBoundingClientRect(),"top"===Q.placement?(O=n.offsetHeight,s=M.top-O-this.opt.arrowWidth,r=M.left):"bottom"===Q.placement?(s=M.bottom+this.opt.arrowWidth,r=M.left):"left"===Q.placement?(s=M.top,r=M.left-P-2*N-2*p-this.opt.arrowWidth):"right"===Q.placement&&(s=M.top,r=M.right+this.opt.arrowWidth),q="center"!==Q.arrowOffset?E.getPixelValue(Q.arrowOffset):Q.arrowOffset,q?"top"===Q.placement||"bottom"===Q.placement?(h.style.top="",h.style.left="center"===q?P/2+N-h.offsetWidth/2+"px":q+"px"):("left"===Q.placement||"right"===Q.placement)&&(h.style.left="","center"===q?(O=O||n.offsetHeight,h.style.top=O/2+N-h.offsetHeight/2+"px"):h.style.top=q+"px"):(h.style.top="",h.style.left=""),"center"===Q.xOffset?r=M.left+o.offsetWidth/2-P/2-N:r+=E.getPixelValue(Q.xOffset),"center"===Q.yOffset?(O=O||n.offsetHeight,s=M.top+o.offsetHeight/2-O/2-N):s+=E.getPixelValue(Q.yOffset),Q.fixedElement||(s+=E.getScrollTop(),r+=E.getScrollLeft()),n.style.position=Q.fixedElement?"fixed":"absolute",n.style.top=s+"px",n.style.left=r+"px"},_initNavButtons:function(){var b=t.createElement("div");return this.prevBtnEl=this._createButton("hopscotch-prev",E.getI18NString("prevBtn")),this.nextBtnEl=this._createButton("hopscotch-next",E.getI18NString("nextBtn")),this.doneBtnEl=this._createButton("hopscotch-done",E.getI18NString("doneBtn")),this.ctaBtnEl=this._createButton("hopscotch-cta"),E.addClass(this.doneBtnEl,"hide"),b.appendChild(this.prevBtnEl),b.appendChild(this.ctaBtnEl),b.appendChild(this.nextBtnEl),b.appendChild(this.doneBtnEl),E.addEvtListener(this.prevBtnEl,"click",function(){y.prevStep(!0)}),E.addEvtListener(this.nextBtnEl,"click",function(){y.nextStep(!0)}),E.addEvtListener(this.doneBtnEl,"click",function(){y.endTour()}),b.className="hopscotch-actions",this.buttonsEl=b,this.containerEl.appendChild(b),this},_getCloseFn:function(){var b=this;return this.closeFn||(this.closeFn=function(a){b.opt.onClose&&E.invokeCallback(b.opt.onClose),b.opt.id&&!b.opt.isTourBubble?y.getCalloutManager().removeCallout(b.opt.id):b.destroy(),E.evtPreventDefault(a)}),this.closeFn},initCloseButton:function(){var b=t.createElement("a");return b.className="hopscotch-bubble-close",b.href="#",b.title=E.getI18NString("closeTooltip"),b.innerHTML=E.getI18NString("closeTooltip"),this.opt.isTourBubble?E.addEvtListener(b,"click",function(f){var e=y.getCurrStepNum(),h=y.getCurrTour(),g=e===h.steps.length-1;E.invokeEventCallbacks("close"),y.endTour(!0,g),f.preventDefault?f.preventDefault():event&&(event.returnValue=!1)}):E.addEvtListener(b,"click",this._getCloseFn()),E.valOrDefault(this.opt.showCloseButton,!0)||E.addClass(b,"hide"),this.closeBtnEl=b,this.containerEl.appendChild(b),this},_initArrow:function(){var d,c;return this.arrowEl=t.createElement("div"),this.arrowEl.className="hopscotch-bubble-arrow-container",c=t.createElement("div"),c.className="hopscotch-bubble-arrow-border",d=t.createElement("div"),d.className="hopscotch-bubble-arrow",this.arrowEl.appendChild(c),this.arrowEl.appendChild(d),this.element.appendChild(this.arrowEl),this},_setupCTAButton:function(d){var c=this;this._showButton(this.ctaBtnEl,!!d.showCTAButton),d.showCTAButton&&d.ctaLabel&&(this.ctaBtnEl.innerHTML=d.ctaLabel,this._ctaFn=function(){c.opt.isTourBubble||y.getCalloutManager().removeCallout(d.id),d.onCTA&&"function"==typeof d.onCTA&&d.onCTA()},E.addEvtListener(this.ctaBtnEl,"click",this._ctaFn))},_removeCTACallback:function(){this.ctaBtnEl&&this._ctaFn&&(E.removeEvtListener(this.ctaBtnEl,"click",this._ctaFn),this._ctaFn=null)},render:function(r,q,p,o){var n,m,l,k,h=this.element;return r?this.currStep=r:this.currStep&&(r=this.currStep),!r.placement&&r.orientation&&(r.placement=r.orientation),n=E.valOrDefault(r.showNextButton,this.opt.showNextButton),m=E.valOrDefault(r.showPrevButton,this.opt.showPrevButton),this.setTitle(r.title||""),this.setContent(r.content||""),this.opt.isTourBubble&&this.setNum(q),this.placement=r.placement,this.showPrevButton(this.prevBtnEl&&m&&q>0),this.showNextButton(this.nextBtnEl&&n&&!p),this.nextBtnEl.innerHTML=r.showSkip?E.getI18NString("skipBtn"):E.getI18NString("nextBtn"),p?E.removeClass(this.doneBtnEl,"hide"):E.addClass(this.doneBtnEl,"hide"),this._setupCTAButton(r),this._setArrow(r.placement),l=E.getPixelValue(r.width)||this.opt.bubbleWidth,k=E.valOrDefault(r.padding,this.opt.bubblePadding),this.containerEl.style.width=l+"px",this.containerEl.style.padding=k+"px",h.style.zIndex=r.zindex||"","top"===r.placement?(h.style.top="-9999px",h.style.left="-9999px",E.removeClass(h,"hide"),this.setPosition(r),E.addClass(h,"hide")):this.setPosition(r),o&&o(!r.fixedElement),this},setTitle:function(b){return b?(this.titleEl.innerHTML=b,E.removeClass(this.titleEl,"hide")):E.addClass(this.titleEl,"hide"),this},setContent:function(b){return b?(this.contentEl.innerHTML=b,E.removeClass(this.contentEl,"hide")):E.addClass(this.contentEl,"hide"),this},setNum:function(d){var c=E.getI18NString("stepNums");c&&d<c.length?d=c[d]:d+=1,this.numberEl.innerHTML=d},_setArrow:function(b){E.removeClass(this.arrowEl,"down up right left"),"top"===b?E.addClass(this.arrowEl,"down"):"bottom"===b?E.addClass(this.arrowEl,"up"):"left"===b?E.addClass(this.arrowEl,"right"):"right"===b&&E.addClass(this.arrowEl,"left")},_getArrowDirection:function(){return"top"===this.placement?"down":"bottom"===this.placement?"up":"left"===this.placement?"right":"right"===this.placement?"left":void 0},show:function(){var e=this,d="fade-in-"+this._getArrowDirection(),f=1000;return E.removeClass(this.element,"hide"),E.addClass(this.element,d),setTimeout(function(){E.removeClass(e.element,"invisible")},50),setTimeout(function(){E.removeClass(e.element,d)},f),this.isShowing=!0,this},hide:function(d){var c=this.element;return d=E.valOrDefault(d,!0),c.style.top="",c.style.left="",d?(E.addClass(c,"hide"),E.removeClass(c,"invisible")):(E.removeClass(c,"hide"),E.addClass(c,"invisible")),E.removeClass(c,"animate fade-in-up fade-in-down fade-in-right fade-in-left"),this.isShowing=!1,this},_showButton:function(f,e,h){var g="hide";h&&(g="hide-all"),typeof e===x&&(e=!0),e?E.removeClass(f,g):E.addClass(f,g)},showPrevButton:function(b){this._showButton(this.prevBtnEl,b)},showNextButton:function(b){this._showButton(this.nextBtnEl,b)},showCloseButton:function(b){this._showButton(this.closeBtnEl,b)},destroy:function(){var b=this.element;b&&b.parentNode.removeChild(b),this.closeBtnEl&&E.removeEvtListener(this.closeBtnEl,"click",this._getCloseFn()),this.ctaBtnEl&&this.onCTA&&this._removeCTACallback()},updateButtons:function(){this.showPrevButton(this.opt.showPrevButton),this.showNextButton(this.opt.showNextButton),this.showCloseButton(this.opt.showCloseButton),this.prevBtnEl.innerHTML=E.getI18NString("prevBtn"),this.nextBtnEl.innerHTML=E.getI18NString("nextBtn"),this.doneBtnEl.innerHTML=E.getI18NString("doneBtn")},init:function(r){var q,p,o,n=t.createElement("div"),m=t.createElement("div"),l=t.createElement("div"),k=this,h=!1;this.element=n,this.containerEl=m,this.titleEl=t.createElement("h3"),this.contentEl=t.createElement("div"),E.addClass(this.titleEl,"hopscotch-title"),E.addClass(this.contentEl,"hopscotch-content"),o={showPrevButton:A.showPrevButton,showNextButton:A.showNextButton,bubbleWidth:A.bubbleWidth,bubblePadding:A.bubblePadding,arrowWidth:A.arrowWidth,showNumber:!0,isTourBubble:!0},r=typeof r===x?{}:r,E.extend(o,r),this.opt=o,n.className="hopscotch-bubble animated",m.className="hopscotch-bubble-container",o.isTourBubble||(n.className+=" hopscotch-callout"),o.isTourBubble?(this.numberEl=t.createElement("span"),this.numberEl.className="hopscotch-bubble-number",m.appendChild(this.numberEl)):E.addClass(n,"no-number"),l.appendChild(this.titleEl),l.appendChild(this.contentEl),l.className="hopscotch-bubble-content",m.appendChild(l),n.appendChild(m),this._initNavButtons(),this.initCloseButton(),this._initArrow(),q=function(){!h&&k.isShowing&&(h=!0,setTimeout(function(){k.setPosition(k.currStep),h=!1},100))},E.addEvtListener(window,"resize",q),this.hide(),E.documentIsReady()?t.body.appendChild(n):(t.addEventListener?(p=function(){t.removeEventListener("DOMContentLoaded",p),window.removeEventListener("load",p),t.body.appendChild(n)},t.addEventListener("DOMContentLoaded",p,!1)):(p=function(){"complete"===t.readyState&&(t.detachEvent("onreadystatechange",p),window.detachEvent("onload",p),t.body.appendChild(n))},t.attachEvent("onreadystatechange",p)),E.addEvtListener(window,"load",p))}},H=function(){var b={};this.createCallout=function(a){var d;if(!a.id){throw"Must specify a callout id."}if(b[a.id]){throw"Callout by that id already exists. Please choose a unique id."}return a.showNextButton=a.showPrevButton=!1,a.isTourBubble=!1,d=new I(a),b[a.id]=d,a.target&&d.render(a,null,null,function(){d.show()}),d},this.getCallout=function(a){return b[a]},this.removeAllCallouts=function(){var a;for(a in b){b.hasOwnProperty(a)&&this.removeCallout(a)}},this.removeCallout=function(a){var d=b[a];b[a]=null,d&&d.destroy()}},J=function(V){var U,T,S,R,Q,P,M,p,l=this,i=function(b){return U||(U=new I(S)),b&&(E.extend(U.opt,{bubblePadding:h("bubblePadding"),bubbleWidth:h("bubbleWidth"),showNextButton:h("showNextButton"),showPrevButton:h("showPrevButton"),showCloseButton:h("showCloseButton"),arrowWidth:h("arrowWidth")}),U.updateButtons()),U},h=function(b){return"undefined"==typeof S?A[b]:E.valOrDefault(S[b],A[b])},g=function(){var b;return b=0>Q||Q>=R.steps.length?null:R.steps[Q]},e=function(){l.nextStep()},d=function(ap){var ao,an,am,al,ak,aj,ai=i(),ah=ai.element,ag=E.getPixelValue(ah.style.top),af=ag+E.getPixelValue(ah.offsetHeight),ae=E.getStepTarget(g()),ad=ae.getBoundingClientRect(),ac=ad.top+E.getScrollTop(),aa=ad.bottom+E.getScrollTop(),Z=ac>ag?ag:ac,Y=af>aa?af:aa,X=E.getScrollTop(),W=X+E.getWindowHeight(),ab=Z-h("scrollTopMargin");Z>=X&&(Z<=X+h("scrollTopMargin")||W>=Y)?ap&&ap():h("smoothScroll")?typeof YAHOO!==x&&typeof YAHOO.env!==x&&typeof YAHOO.env.ua!==x&&typeof YAHOO.util!==x&&typeof YAHOO.util.Scroll!==x?(ao=YAHOO.env.ua.webkit?t.body:t.documentElement,am=YAHOO.util.Easing?YAHOO.util.Easing.easeOut:void 0,an=new YAHOO.util.Scroll(ao,{scroll:{to:[0,ab]}},h("scrollDuration")/1000,am),an.onComplete.subscribe(ap),an.animate()):v?jQuery("body, html").animate({scrollTop:ab},h("scrollDuration"),ap):(0>ab&&(ab=0),al=X>Z?-1:1,ak=Math.abs(X-ab)/(h("scrollDuration")/10),aj=function(){var a=E.getScrollTop(),f=a+al*ak;return al>0&&f>=ab||0>al&&ab>=f?(f=ab,ap&&ap(),window.scrollTo(0,f),void 0):(window.scrollTo(0,f),E.getScrollTop()===a?(ap&&ap(),void 0):(setTimeout(aj,10),void 0))},aj()):(window.scrollTo(0,ab),ap&&ap())},O=function(k,f){var r,n,m;Q+k>=0&&Q+k<R.steps.length?(Q+=k,n=g(),m=function(){r=E.getStepTarget(n),r?f(Q):(E.invokeEventCallbacks("error"),O(k,f))},n.delay?setTimeout(m,n.delay):m()):f(-1)},N=function(m,k){var Z,Y,X,W,r=i(),n=this;if(r.hide()._removeCTACallback(),m=E.valOrDefault(m,!0),Z=g(),Y=Z,X=k>0?Y.multipage:Q>0&&R.steps[Q-1].multipage,W=function(b){var a;return -1===b?this.endTour(!0):(m&&(a=k>0?E.invokeEventCallbacks("next",Y.onNext):E.invokeEventCallbacks("prev",Y.onPrev)),X?(E.setState(h("cookieName"),R.id+":"+Q,1),void 0):(a=E.valOrDefault(a,!0),a?this.showStep(b):this.endTour(!1),void 0))},!X&&h("skipIfNoElement")){O(k,function(b){W.call(n,b)})}else{if(Q+k>=0&&Q+k<R.steps.length){if(Q+=k,Z=g(),!E.getStepTarget(Z)&&!X){return E.invokeEventCallbacks("error"),this.endTour(!0,!1)}W.call(this,Q)}}return this},s=function(k){var f,r,n,m={};for(f in k){k.hasOwnProperty(f)&&"id"!==f&&"steps"!==f&&(m[f]=k[f])}return p.call(this,m,!0),r=E.getState(h("cookieName")),r&&(n=r.split(":"),P=n[0],M=n[1],M=parseInt(M,10)),this},q=function(k,f){var n,m;if(Q=k||0,n=g(),m=E.getStepTarget(n)){return f(Q),void 0}if(!m){if(E.invokeEventCallbacks("error"),h("skipIfNoElement")){return O(1,f),void 0}Q=-1,f(Q)}},o=function(aa){var Z,Y,X=R.steps[aa],W=R.steps,r=W.length,n=R.id+":"+aa,m=i(),k=E.getStepTarget(X);Y=function(){m.show(),E.invokeEventCallbacks("show",X.onShow)},Q=aa,m.hide(!1),Z=aa===r-1,m.render(X,aa,Z,function(b){b?d(Y):Y(),X.nextOnTargetClick&&E.addEvtListener(k,"click",e)}),E.setState(h("cookieName"),n,1)},j=function(b){b&&this.configure(b)};this.getCalloutManager=function(){return typeof T===x&&(T=new H),T},this.startTour=function(k,f){var n,m=this;if(R||(R=k,s.call(this,k)),typeof f!==x){if(f>=R.steps.length){throw"Specified step number out of bounds."}Q=f}return E.documentIsReady()?(Q||R.id!==P||typeof M===x?Q||(Q=0):Q=M,q(Q,function(r){var c=-1!==r&&E.getStepTarget(R.steps[r]);return c?(E.invokeEventCallbacks("start"),n=i(),n.hide(!1),m.isActive=!0,E.getStepTarget(g())?m.showStep(r):(E.invokeEventCallbacks("error"),h("skipIfNoElement")&&m.nextStep(!1)),void 0):(m.endTour(!1,!1),void 0)}),this):(w=!0,this)},this.showStep=function(f){var c=R.steps[f];return c.delay?setTimeout(function(){o(f)},c.delay):o(f),this},this.prevStep=function(b){return N.call(this,b,-1),this},this.nextStep=function(k){var f=g(),m=E.getStepTarget(f);return f.nextOnTargetClick&&E.removeEvtListener(m,"click",e),N.call(this,k,1),this},this.endTour=function(k,f){var m=i();return k=E.valOrDefault(k,!0),f=E.valOrDefault(f,!0),Q=0,M=void 0,m.hide(),k&&E.clearState(h("cookieName")),this.isActive&&(this.isActive=!1,R&&f&&E.invokeEventCallbacks("end")),this.removeCallbacks(null,!0),this.resetDefaultOptions(),R=null,this},this.getCurrTour=function(){return R},this.getCurrTarget=function(){return E.getStepTarget(g())},this.getCurrStepNum=function(){return Q},this.listen=function(k,f,m){return k&&D[k].push({cb:f,fromTour:m}),this},this.unlisten=function(k,f){var r,n,m=D[k];for(r=0,n=m.length;n>r;++r){m[r]===f&&m.splice(r,1)}return this},this.removeCallbacks=function(m,k){var X,W,r,n;for(n in D){if(!m||m===n){if(k){for(X=D[n],W=0,r=X.length;r>W;++W){X[W].fromTour&&(X.splice(W--,1),--r)}}else{D[n]=[]}}}return this},this.registerHelper=function(f,c){"string"==typeof f&&"function"==typeof c&&(C[f]=c)},this.unregisterHelper=function(b){C[b]=null},this.invokeHelper=function(k){var f,n,m=[];for(f=1,n=arguments.length;n>f;++f){m.push(arguments[f])}C[k]&&C[k].call(null,m)},this.setCookieName=function(b){return S.cookieName=b,this},this.resetDefaultOptions=function(){return S={},this},this.resetDefaultI18N=function(){return F={},this},this.getState=function(){return E.getState(h("cookieName"))},p=function(k,f){var X,W,r,n,m=["next","prev","start","end","show","error","close"];for(S||this.resetDefaultOptions(),E.extend(S,k),k&&E.extend(F,k.i18n),r=0,n=m.length;n>r;++r){W="on"+m[r].charAt(0).toUpperCase()+m[r].substring(1),k[W]&&this.listen(m[r],k[W],f)}return X=i(!0),this},this.configure=function(b){return p.call(this,b,!1)},j.call(this,V)},y=new J,L[K]=y)}(window,"hopscotch");(function(){var g="inputChange",a="character",d="",f="hide",c="match",b="hp-share",i="nus-discussion",h="group-discussion-open",j="group-discussion-closed";LI.MentionsDecorator=function(am,Z){var Q=Z.triggers||"A",ap=Z.context||d,F=d,aq=false,G=(Z.inputCallout&&Z.inputCallout.currentImpressionCount)||0,E=Y$(Z.mentionsEl)[0],V,O=Y$(Z.highlightEl)[0],ak,L=YAHOO.env.ua.ie,m=Y$(Z.mentionsInputEl)[0],A,S,K,an,s=d,v=d,M=false,t,aj=Z.maximumMentions||30,q,z,ab=[],B=Z.queryDelay||250,w=this,ae=(Z.inputCallout&&Z.inputCallout.enabled)||false,x,n=Z.typeahead,al=Z.typeaheadEl&&Y$(Z.typeaheadEl)[0],D=true,ah=Z.dedupeConnections||false,C=Z.urlAppend||d,W=YAHOO.lang,N=Z.isFromCap||false;if(LI.MentionsDecorator.debugMode===undefined){LI.MentionsDecorator.debugMode=(window.location.href.indexOf("mentions_debug=true")!==-1)}aq=LI.MentionsDecorator.debugMode;w.mentionEntities=[];w.currentMatch={};w.previousToken="";w.previousEditedMentionTokens=null;w.currentMentionTokens=null;w.sendSecondWord=w.hasLastResults=w.usedSecondToken=w.sentSecondQuery=w.dependenciesLoaded=false;w.upperRegexObj=/^[A-Z\u00C0-\u00D6\u00D8-\u00DE]$/;q=function(ar){if(aq){var at=(window.console&&window.console.log)?window.console.log:window.alert;at(w);at(ar)}};function ag(){function ar(av){var au=false,at;try{at=av.responseText.influencer_entitlement.result;au=at.isInfluencer||at.isAuthor}catch(aw){q("influencer check failed")}LI.MentionsDecorator.isInfluencer=au}if(!LI.MentionsDecorator.isInfluencer&&!LI.MentionsDecorator.influencerCheckPerformed){LI.MentionsDecorator.influencerCheckPerformed=true;if(LI.MentionsIsInfluencerUrl&&LI.MentionsIsInfluencerUrl.length){LI.asyncRequest("POST",LI.MentionsIsInfluencerUrl,{failure:ar,success:ar},null)}else{q("failed to get influencer check url");LI.MentionsDecorator.isInfluencer=false}}}if(!N&&(ap===i||ap===b)){ag()}function H(){u();p(true);if(K){K.close()}}function p(ar){if(!z){z=YDom.getAncestorByClassName(m,"mentions-container")}LI.toggleClass(z,"hasFocus",ar)}function u(){var at=false,ar=false,av=!!window._;if(!av){YAHOO.util.Get.script(LI.MentionsUnderscore.scripts[0],{onSuccess:function(){av=true;au()},onFailure:function(){q("LI.MentionsUnderscore failed")}})}if(!w.dependenciesLoaded){if(!ar){YAHOO.util.Get.script(LI.MentionsDependencies.scripts[0],{onSuccess:function(){ar=true;au()},onFailure:function(){q("LI.MentionsDependencies failed")}})}if(ap&&!LI.DataSource&&!at){YAHOO.util.Get.script(LI.MentionsDataSourceDependencies.scripts[0],{onSuccess:function(){at=true;au()},onFailure:function(){q("LI.MentionsDataSourceDependencies failed")}})}else{at=true}}function au(){if(ar&&at&&av){t=LI.DataSource;w.dependenciesLoaded=true;if(ap){J()}else{ai()}}}}function J(){var at=[],av=[],ar,ax,ay,aw=LI.i18n.get("typeahead2-search-connections"),au="&query="+new Date().getTime();ay={discussionparticipants:LI.i18n.get("typeahead2-search-discussion-participants"),company:LI.i18n.get("typeahead2-search-companies"),mynetwork:aw,my1stnetwork:aw};switch(ap){case i:if(LI.MentionsDecorator.isInfluencer){at[0]=W.merge(t.Sources.TYPE_COMPANIES_AND_NETWORK,{})}else{at[0]=W.merge(t.Sources.TYPE_COMPANIES_AND_FIRST_DEGREE_CONNECTIONS,{})}av[0]="connectionsAndCompany";at[1]=W.merge(t.Sources.TYPE_DISCUSSION_PARTICIPANTS,{});at[1].liveData+="?"+(C.indexOf("&")===0?C.substr(1):C)+au;av[1]="discussionparticipants";break;case b:if(LI.MentionsDecorator.isInfluencer){at[0]="TYPE_COMPANIES_AND_NETWORK"}else{at[0]="TYPE_COMPANIES_AND_FIRST_DEGREE_CONNECTIONS"}break;case h:at[0]=W.merge(t.Sources.TYPE_GROUP_MEMBERS_AND_NETWORK,{});at[0].config.scriptQueryAppend+=C;break;case j:at[0]=W.merge(t.Sources.TYPE_GROUP_MEMBERS,{});at[0].config.scriptQueryAppend+=C;break}ar=at.length;if(ar>1){F={};ax={};for(ak=0;ak<ar;ak++){ax[av[ak]]=at[ak].create(m)}F.create=function(){var az={};if(ah){az.doWithSourceSuccessCallback=y}return t.Helper.createAggregatedDataSource(ax,az,ay)}}else{if(ar===1){F=at[0]}}q("contextDataSource: "+F);ai()}function y(at,ay){q("function call: deDupeDataSources");var ax,av,aw=at.results,ar=[],au,az;for(az in ay){if(az==="discussionparticipants"){av=aw.length;au=ay[az].resultList;while(av--){ax=au.length;if(aw[av].sourceID==="mynetwork"||aw[av].sourceID==="my1stnetwork"){while(ax--){if(aw[av].id===au[ax].id){ar.push(av)}}}}}}ar.sort();ax=ar.length;while(ax--){aw.splice(ar[ax],1)}return{results:aw}}function ai(){var at,au,ar;if(!M&&w.dependenciesLoaded){B=parseInt(B.toString().replace(/(?:\D*)(\d+)(?:\D*)/gi,"$1"),10);if(isNaN(B)){B=250}S=new LI.InputChangeObserver(m);S[g].subscribe(aa);w.typeahead=Z.typeahead||LI.Controls.getControl(al,"LI.Typeahead2");ar=w.typeahead;if(ap){ar.source=F}ar.onItemSelect=X;if(Q==="H"){ar.onDataReturn=l}ar.init();x=new LI.TokenMatcher(S,Q);x[c].subscribe(P);x[f].subscribe(I);V=new LI.TokenHighlighter(O);YEvent.on(m,"blur",o);M=true}}function l(aw,ax,ar){q("function call: handleDataReturn");var aF=w.currentMatch,az,aC,aA,au=ax[2],aE,aD,av,at,ay=decodeURIComponent(ax[1]),aB;if(Q==="H"){az=aF.trigger;if(az==="upper"){if(!w.sentSecondQuery){at=aF.token;aE=au.length;w.hasLastResults=!!aE;aC=(at.indexOf(" ")!==-1);aD=aC?at.substr(at.indexOf(" ")+1):"";av=aD.length;aA=aC?w.upperRegexObj.test(aD.substr(0,1)):false;aB=(ay===at.substr(0,ay.length))||(ay===aD.substr(0,ay.length));if(aB&&aC&&aA&&av&&((!w.usedSecondToken&&!aE)||w.usedSecondToken)){w.sendSecondWord=true;if(!aE&&av>=4&&ay===at&&aD!==at){T();w.sentSecondQuery=true}}else{if(!aB&&aC&&aA){if(av<=3){w.sendSecondWord=false}else{if(av>=4&&!aE){w.sendSecondWord=true;T();w.sentSecondQuery=true}}}}}else{w.sentSecondQuery=false;w.sendSecondWord=false}}}}function P(au,at){var ar=at[0].match;q("match: "+YJson.stringify(ar));if(k(ar)&&!U()){ad();w.currentMatch=ar;ab.push(window.setTimeout(T,B))}}function U(){var av=w.previousEditedMentionTokens,at=w.currentMentionTokens,ar,au;if(av&&at){w.previousEditedMentionTokens=null;w.currentMentionTokens=null;if(av.length===at.length){ar=av[av.length-1];au=at[at.length-1];if(ar.length>au.length){return true}if(av[0].length>at[0].length){return true}}}return false}function T(){var aA=w.currentMatch,au,ay,aw,ax=false,av,az,ar,at;if(Q==="H"){au=aA.trigger;if(au==="upper"){at=aA.token;ay=at.indexOf(" ")!==-1;az=ay?at.substr(at.indexOf(" ")+1):"";av=w.previousToken;aw=ay?w.upperRegexObj.test(az.substr(0,1)):false;if(av.length){ax=(av===az.substr(0,av.length))||(av===at.substr(0,av.length))}if(az.length>=4){if(ay&&aw&&(w.sendSecondWord||(ax&&((!w.usedSecondToken&&!w.hasLastResults)||w.usedSecondToken)))){ar=aA.start;aA.token=az;aA.start=ar+at.lastIndexOf(" ");if(ar){aA.start++}w.usedSecondToken=true}else{w.usedSecondToken=false}}}w.previousToken=w.currentMatch.token}q("query: "+w.currentMatch.token);w.typeahead.sendQuery(w.currentMatch.token)}function k(ax){var ar=ax.start,ay=ax.end,aw,av,au,at=w.mentionEntities;ak=at.length;while(ak--){aw=at[ak];av=aw.index-1;au=av+aw.length;if((ar>=av&&ar<au)||(ay>=av&&ay<=au)){return false}}return true}function I(){ad();al.value=d;try{w.typeahead.collapseContainer()}catch(ar){}}function aa(){v=s;s=m.value;ac(v)}function X(aF,aE){var ax=m.value,aI=w.currentMatch,au,ay,aC,aG=d,az,aH=aE[2],aD,at,ar,av,aB,aw,aA=w.currentMatch.triggerIncluded;aD=aH.sourceID;au=LI.htmlUnencode(aH.displayName);aw=au.length;if(aH.type!=="category"){ar=aI.start;q("itemType: "+aD);switch(aD){case"groupmembers":case"my1stnetwork":case"mynetwork":case"discussionparticipants":aD="member";break}if(ar){++ar}at=[ax.substr(0,ar),au,ax.substr(w.currentMatch.end)].join(d);if(ar){aC=au.indexOf(" ");if(aC!==-1){aG=LI.htmlUnencode(au.substr(0,aC));if(aG!==d){aB=ar-(aG.length+1);av=ar+aw;az=at.substr(aB,av).toLowerCase();ay=[aG," ",au].join(d).toLowerCase();if(ay===az){if(k({start:aB,end:(aB+aw)})){at=[at.substr(0,aB),au,at.substr(av)].join(d);ar=aB}}}}}m.value=at;if(w.mentionEntities.length<aj){w.mentionEntities.push({id:aH.id,index:ar,length:aw,type:aD,token:au,triggerIncluded:aA,caretPosition:aI.caretPosition});ao();aa();R();m.focus();if(ar&&!aA){ar++}e(m,ar+aw);V.render(m.value,w.mentionEntities)}}}function o(){p(false);if(K){K.close()}al.value=d;window.setTimeout(function(){w.typeahead.collapseContainer();w.currentMatch=d},250)}function ad(){var ar=ab.length;while(ar--){window.clearTimeout(ab[ar])}}this.clearMentions=function(){w.mentionEntities=[];R();V.render(d,[])};function R(){E.value=YJson.stringify(r())}function r(){var at,au=[],ar=w.mentionEntities.length;for(ak=0;ak<ar;ak++){at=w.mentionEntities[ak];au[ak]={id:at.id,index:at.index,length:at.length,type:at.type}}return au}function Y(at){var aw=at,ar=false,au;if(M){try{ar=w.typeahead.isContainerOpen()}catch(av){}if(ar){au=at.keyCode;switch(au){case 9:case 13:if(!((!YAHOO.env.ua.opera&&(navigator.userAgent.toLowerCase().indexOf("mac")===-1))||(YAHOO.env.ua.webkit>420))){aw={type:"keydown",keyCode:39,target:al,currentTarget:al}}o();case 27:o();case 38:case 40:w.typeahead.proxyKeyDown(aw);YEvent.stopEvent(at);break}}}else{ai()}}function ac(aI){var ax,aJ=[],aM,aB,aC,aE,aF=false,aN,aA,aO,aT=w.mentionEntities.length,aR=[],aH,aL,ar,au,aG,av,aD,az,aw,aP,aQ=" ",at,ay,aK,aS=(L&&L<=9);s=m.value;az=aS&&D?-1:0;aE=s.length-aI.length;for(ak=0;ak<aT;ak++){aM=w.mentionEntities[ak];aC=aM.token;aB=aM.index;aN=encodeURIComponent(aC);if(aN.indexOf("%00")>-1){aC=decodeURIComponent(aN.replace("%00",""))}au=s.indexOf(aC);aO=aI.indexOf(aC)===aI.lastIndexOf(aC)&&au===s.lastIndexOf(aC);aA=au===-1;if(aO&&au!==aB&&au!==-1){w.mentionEntities[ak].index=s.indexOf(aC)}else{aK=aC.length;at=s.substr(aB,aK);if(at!==aC){q("adjustMentions: strCheck !== curToken");ax=aB+aE+az;ay=s.substr(ax,aK);if(ay===aC){q("adjustMentions: strDiffCheck === curToken");w.mentionEntities[ak].index=ax}else{q("adjustMentions: strDiffCheck !== curToken");aH=aC.split(aQ);aw=new RegExp("[^"+aC.replace(/\s/g,d).replace(/\-/g,"\\-")+"\\s]","gi");aL=at.replace(aw,"").split(aQ);aJ=_.intersection(aH,aL);q("curToken: "+aC);q("strCheck: "+at);q("strDiffCheck: "+ay);q("commonTokens: "+aJ);if(aJ.length){aF=true;av=aJ.join(aQ);au=aM.index;aG=av.length;ar=au+aG;w.previousEditedMentionTokens=aH;w.currentMentionTokens=aL;aM.token=av;aM.length=aG;aM.end=ar;w.mentionEntities[ak]=aM;aD=s.substr(0,au)+av+d+s.substr(au-1+aK);m.value=aD;if(aS){aE=s.length-m.value.length;af(m,ar,0)}else{e(m,ar)}}else{aR.push(ak)}az=0}}}}aP=aR.length;aR.sort().reverse();if(aP){for(ak=0;ak<aP;ak++){w.mentionEntities.splice(aR[ak],1)}}ao();if(aF){ac(s)}R();V.render(s,w.mentionEntities);D=false}function af(ar,au,at){setTimeout(function(){e(ar,au)},at)}function ao(){w.mentionEntities.sort(function(at,ar){return at.index-ar.index})}q("input focused before init: "+(m===document.activeElement));if(m===document.activeElement){H()}YEvent.on(m,"focus",H,w);YEvent.on(m,"keydown",Y,w);if(ae&&!K){YEvent.on(window,"load",function(){A=Z.inputCallout;function at(au){if(au.target.className==="hopscotch-bubble-close"&&Y$(".mentions-share-box-promo-content",Y$(".hopscotch-bubble-container")[0],true)){window.oUISettings.saveSettings(this.uiSetting,3)}}function ar(){if(!K){return}K.open();window.oUISettings.saveSettings(A.uiSetting,++G);YEvent.on(Y$(".hopscotch-bubble-container")[0],"click",at,A,true)}an=Y$("#"+A.contentID,document,true);if(an&&LI.HopscotchCallout){K=new LI.HopscotchCallout(m,{id:A.contentID,orientation:"bottom",showOn:false,xOffset:A.offsetX,yOffset:A.offsetY,width:A.width,title:"",content:an.innerHTML})}if(L&&L<=7){window.setTimeout(ar,500)}else{ar()}})}this.adjustMentions=ac};LI.MentionsDecorator.highlight=function(q,l,k){var o=l,x,v,w,n,r,t,s,u,p=[],m=0;if(o&&o.length&&o!=="[]"){o=YJson.parse(o);x=o.length;o=o.sort(function(z,y){return y.index-z.index});while(x--){n=o[x];s=n.index;w=n.length;v=s+w;u=q.substr(s,w);r=n.mini||"";t=n.profile||"";if(s){p.push(LI.htmlEncode(q.substr(m,(s-m))))}if(t){if(r){if(k){p.push(['<span class="miniprofile-container ',n.mini,'">','<a href="',n.profile,'" class="mention">',LI.htmlEncode(u),"</a></span>"].join(""))}else{p.push(['<span class="new-miniprofile-container ',n.mini,'" data-li-url="',n.mini,'" data-li-tl="tl/shared/profile/mini_profile_shell">','<a href="',n.profile,'" class="mention">',LI.htmlEncode(u),"</a></span>"].join(""))}}else{p.push(['<a href="',n.profile,'" class="mention">',LI.htmlEncode(u),"</a>"].join(""))}}else{p.push(LI.htmlEncode(u))}if(!x){p.push(LI.htmlEncode(q.substr(v)))}m=v}p=p.join("")}else{p=LI.htmlEncode(q)}return p};function e(m,k){var l;if(m.setSelectionRange){m.setSelectionRange(k,k)}else{if(m.createTextRange){l=m.createTextRange();l.collapse(true);l.moveEnd(a,k);l.moveStart(a,k);l.select()}}}}());